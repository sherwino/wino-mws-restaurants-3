{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/idb/lib/idb.js","src/js/browser.js","src/js/dbhelper.js","src/js/dbpromise.js","src/js/favoriteButton.js","src/js/favoritebutton.js","src/js/lozad.js","src/js/main.js","src/js/register.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"main.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","'use strict';\n\n(function() {\n  function toArray(arr) {\n    return Array.prototype.slice.call(arr);\n  }\n\n  function promisifyRequest(request) {\n    return new Promise(function(resolve, reject) {\n      request.onsuccess = function() {\n        resolve(request.result);\n      };\n\n      request.onerror = function() {\n        reject(request.error);\n      };\n    });\n  }\n\n  function promisifyRequestCall(obj, method, args) {\n    var request;\n    var p = new Promise(function(resolve, reject) {\n      request = obj[method].apply(obj, args);\n      promisifyRequest(request).then(resolve, reject);\n    });\n\n    p.request = request;\n    return p;\n  }\n\n  function promisifyCursorRequestCall(obj, method, args) {\n    var p = promisifyRequestCall(obj, method, args);\n    return p.then(function(value) {\n      if (!value) return;\n      return new Cursor(value, p.request);\n    });\n  }\n\n  function proxyProperties(ProxyClass, targetProp, properties) {\n    properties.forEach(function(prop) {\n      Object.defineProperty(ProxyClass.prototype, prop, {\n        get: function() {\n          return this[targetProp][prop];\n        },\n        set: function(val) {\n          this[targetProp][prop] = val;\n        }\n      });\n    });\n  }\n\n  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return this[targetProp][prop].apply(this[targetProp], arguments);\n      };\n    });\n  }\n\n  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyCursorRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function Index(index) {\n    this._index = index;\n  }\n\n  proxyProperties(Index, '_index', [\n    'name',\n    'keyPath',\n    'multiEntry',\n    'unique'\n  ]);\n\n  proxyRequestMethods(Index, '_index', IDBIndex, [\n    'get',\n    'getKey',\n    'getAll',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(Index, '_index', IDBIndex, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  function Cursor(cursor, request) {\n    this._cursor = cursor;\n    this._request = request;\n  }\n\n  proxyProperties(Cursor, '_cursor', [\n    'direction',\n    'key',\n    'primaryKey',\n    'value'\n  ]);\n\n  proxyRequestMethods(Cursor, '_cursor', IDBCursor, [\n    'update',\n    'delete'\n  ]);\n\n  // proxy 'next' methods\n  ['advance', 'continue', 'continuePrimaryKey'].forEach(function(methodName) {\n    if (!(methodName in IDBCursor.prototype)) return;\n    Cursor.prototype[methodName] = function() {\n      var cursor = this;\n      var args = arguments;\n      return Promise.resolve().then(function() {\n        cursor._cursor[methodName].apply(cursor._cursor, args);\n        return promisifyRequest(cursor._request).then(function(value) {\n          if (!value) return;\n          return new Cursor(value, cursor._request);\n        });\n      });\n    };\n  });\n\n  function ObjectStore(store) {\n    this._store = store;\n  }\n\n  ObjectStore.prototype.createIndex = function() {\n    return new Index(this._store.createIndex.apply(this._store, arguments));\n  };\n\n  ObjectStore.prototype.index = function() {\n    return new Index(this._store.index.apply(this._store, arguments));\n  };\n\n  proxyProperties(ObjectStore, '_store', [\n    'name',\n    'keyPath',\n    'indexNames',\n    'autoIncrement'\n  ]);\n\n  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'put',\n    'add',\n    'delete',\n    'clear',\n    'get',\n    'getAll',\n    'getKey',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  proxyMethods(ObjectStore, '_store', IDBObjectStore, [\n    'deleteIndex'\n  ]);\n\n  function Transaction(idbTransaction) {\n    this._tx = idbTransaction;\n    this.complete = new Promise(function(resolve, reject) {\n      idbTransaction.oncomplete = function() {\n        resolve();\n      };\n      idbTransaction.onerror = function() {\n        reject(idbTransaction.error);\n      };\n      idbTransaction.onabort = function() {\n        reject(idbTransaction.error);\n      };\n    });\n  }\n\n  Transaction.prototype.objectStore = function() {\n    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));\n  };\n\n  proxyProperties(Transaction, '_tx', [\n    'objectStoreNames',\n    'mode'\n  ]);\n\n  proxyMethods(Transaction, '_tx', IDBTransaction, [\n    'abort'\n  ]);\n\n  function UpgradeDB(db, oldVersion, transaction) {\n    this._db = db;\n    this.oldVersion = oldVersion;\n    this.transaction = new Transaction(transaction);\n  }\n\n  UpgradeDB.prototype.createObjectStore = function() {\n    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));\n  };\n\n  proxyProperties(UpgradeDB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(UpgradeDB, '_db', IDBDatabase, [\n    'deleteObjectStore',\n    'close'\n  ]);\n\n  function DB(db) {\n    this._db = db;\n  }\n\n  DB.prototype.transaction = function() {\n    return new Transaction(this._db.transaction.apply(this._db, arguments));\n  };\n\n  proxyProperties(DB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(DB, '_db', IDBDatabase, [\n    'close'\n  ]);\n\n  // Add cursor iterators\n  // TODO: remove this once browsers do the right thing with promises\n  ['openCursor', 'openKeyCursor'].forEach(function(funcName) {\n    [ObjectStore, Index].forEach(function(Constructor) {\n      // Don't create iterateKeyCursor if openKeyCursor doesn't exist.\n      if (!(funcName in Constructor.prototype)) return;\n\n      Constructor.prototype[funcName.replace('open', 'iterate')] = function() {\n        var args = toArray(arguments);\n        var callback = args[args.length - 1];\n        var nativeObject = this._store || this._index;\n        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));\n        request.onsuccess = function() {\n          callback(request.result);\n        };\n      };\n    });\n  });\n\n  // polyfill getAll\n  [Index, ObjectStore].forEach(function(Constructor) {\n    if (Constructor.prototype.getAll) return;\n    Constructor.prototype.getAll = function(query, count) {\n      var instance = this;\n      var items = [];\n\n      return new Promise(function(resolve) {\n        instance.iterateCursor(query, function(cursor) {\n          if (!cursor) {\n            resolve(items);\n            return;\n          }\n          items.push(cursor.value);\n\n          if (count !== undefined && items.length == count) {\n            resolve(items);\n            return;\n          }\n          cursor.continue();\n        });\n      });\n    };\n  });\n\n  var exp = {\n    open: function(name, version, upgradeCallback) {\n      var p = promisifyRequestCall(indexedDB, 'open', [name, version]);\n      var request = p.request;\n\n      if (request) {\n        request.onupgradeneeded = function(event) {\n          if (upgradeCallback) {\n            upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));\n          }\n        };\n      }\n\n      return p.then(function(db) {\n        return new DB(db);\n      });\n    },\n    delete: function(name) {\n      return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);\n    }\n  };\n\n  if (typeof module !== 'undefined') {\n    module.exports = exp;\n    module.exports.default = module.exports;\n  }\n  else {\n    self.idb = exp;\n  }\n}());\n","let usersBrowser;\r\nconst { userAgent } = navigator;\r\n\r\n// The order matters here, and this may report false positives for unlisted browsers.\r\nif (userAgent.indexOf('Firefox') > -1) {\r\n    usersBrowser = 'Mozilla Firefox';\r\n} else if (userAgent.indexOf('Opera') > -1) {\r\n    usersBrowser = 'Opera';\r\n} else if (userAgent.indexOf('Trident') > -1) {\r\n    usersBrowser = 'Microsoft Internet Explorer';\r\n} else if (userAgent.indexOf('Edge') > -1) {\r\n    usersBrowser = 'Microsoft Edge';\r\n} else if (userAgent.indexOf('Chrome') > -1) {\r\n    usersBrowser = 'Google Chrome or Chromium';\r\n} else if (userAgent.indexOf('Safari') > -1) {\r\n    usersBrowser = 'Apple Safari';\r\n} else {\r\n    usersBrowser = 'unknown';\r\n}\r\n\r\nconsole.log(`You are using: ${usersBrowser}`);\r\n","import dbPromise from \"./dbpromise\";\r\n\r\n/**\r\n * Common database helper functions.\r\n */\r\nexport default class DBHelper {\r\n  /**\r\n   * API URL\r\n   */\r\n  static get API_URL() {\r\n    const port = 1337; // port where sails server will listen.\r\n\r\n    const heroku = \"https://winosails.herokuapp.com\";\r\n    const isLocalHost = () => {\r\n      if (window.location.hostname.includes(\"localhost\")) {\r\n        return `http://localhost:${port}`;\r\n      }\r\n    };\r\n\r\n    const url = isLocalHost() || heroku;\r\n\r\n    return url;\r\n  }\r\n\r\n  /**\r\n   * Fetch all restaurants.\r\n   */\r\n  static fetchRestaurants(callback) {\r\n    this.syncOfflinefav()\r\n    let xhr = new XMLHttpRequest();\r\n    xhr.open(\"GET\", `${DBHelper.API_URL}/restaurants`);\r\n    xhr.onload = () => {\r\n      if (xhr.status === 200) {\r\n        const restaurants = JSON.parse(xhr.responseText);\r\n        dbPromise.putRestaurants(restaurants);\r\n        callback(null, restaurants);\r\n      } else {\r\n        // Oops!. Got an error from server.\r\n        console.log(\r\n          `Request failed. Returned status of ${xhr.status}, trying idb...`\r\n        );\r\n        // if xhr request isn't code 200, try idb\r\n        dbPromise.getRestaurants().then(idbRestaurants => {\r\n          if (idbRestaurants.length) {\r\n            callback(null, idbRestaurants);\r\n          } else {\r\n            callback(\"No restaurants found in idb\", null);\r\n          }\r\n        });\r\n      }\r\n    };\r\n    // XHR needs error handling for when server is down (doesn't respond or sends back codes)\r\n    xhr.onerror = () => {\r\n      console.log(\"Error while trying XHR, trying idb...\");\r\n      // try idb, and if we get restaurants back, return them, otherwise return an error\r\n      dbPromise.getRestaurants().then(idbRestaurants => {\r\n        if (idbRestaurants.length) {\r\n          callback(null, idbRestaurants);\r\n        } else {\r\n          callback(\"No restaurants found in idb\", null);\r\n        }\r\n      });\r\n    };\r\n    xhr.send();\r\n  }\r\n\r\n  /**\r\n   * Fetch a restaurant by its ID.\r\n   */\r\n  static fetchRestaurantById(id, callback) {\r\n    this.syncOfflineReviews();\r\n    fetch(`${DBHelper.API_URL}/restaurants/${id}`)\r\n      .then(response => {\r\n        if (!response.ok)\r\n          return Promise.reject(\"Restaurant couldn't be fetched from network\");\r\n        return response.json();\r\n      })\r\n      .then(fetchedRestaurant => {\r\n        // if restaurant could be fetched from network:\r\n        dbPromise.putRestaurants(fetchedRestaurant);\r\n        return callback(null, fetchedRestaurant);\r\n      })\r\n      .catch(networkError => {\r\n        // if restaurant couldn't be fetched from network:\r\n        console.log(`${networkError}, trying idb.`);\r\n        dbPromise.getRestaurants(id).then(idbRestaurant => {\r\n          if (!idbRestaurant)\r\n            return callback(\"Restaurant not found in idb either\", null);\r\n          return callback(null, idbRestaurant);\r\n        });\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Fetch restaurant reviews by restaurant id.\r\n   */\r\n  static fetchsReviewsByRestaurantId(id) {\r\n    return dbPromise.getReviewsForRestaurant(id).then(idbReviews => {\r\n      if (!idbReviews.length) {\r\n        console.info(\"No reviews in idb\", idbReviews);\r\n        console.info(\"Fetching from API\");\r\n\r\n        return fetch(`${DBHelper.API_URL}/reviews/?restaurant_id=${id}`)\r\n          .then(response => response.json())\r\n          .then(fetchedReviews => {\r\n            console.info(\"Found Reviews saving to idb\");\r\n            dbPromise.putReviews(fetchedReviews);\r\n\r\n            return fetchedReviews;\r\n          })\r\n          .catch(err => {\r\n            console.error(\"Reviews couldn't be fetched from network, sorry.\");\r\n          });\r\n      } else {\r\n        console.info(\"Found reviews on idb\");\r\n\r\n        return idbReviews;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * I have an idb collection of offline messages that need to get online\r\n   */\r\n  static syncOfflineReviews() {\r\n    return dbPromise.getOfflineReviews().then(reviews => {\r\n      // If we actually got some reviews, send them to idb, not sure if I send whole object\r\n      if (reviews) {\r\n        const url = `${DBHelper.API_URL}/reviews/`;\r\n        const POST = {\r\n          method: \"POST\",\r\n          body: JSON.stringify(reviews)\r\n        };\r\n\r\n        return fetch(url, POST).then(response => {\r\n          if (!response.ok) {\r\n            return Promise.reject(\"We couldn't post review to server.\");\r\n          }\r\n          console.info(\"Posted offline reviews to api successfully\");\r\n          return response.json();\r\n        });\r\n      }\r\n      return null;\r\n    });\r\n  }\r\n\r\n    /**\r\n   * I have an idb collection of offline messages that need to get online\r\n   */\r\n  static syncOfflinefav() {\r\n    return dbPromise.getOfflinefavs().then(favs => {\r\n      // If we actually got some favs, send them to idb\r\n      if (favs) {\r\n        const url = `${DBHelper.API_URL}/restaurants/${restaurantId}/?is_favorite=${!fav}`;\r\n        const PUT = {\r\n          method: \"PUT\",\r\n        };\r\n\r\n        return fetch(url, PUT).then(response => {\r\n          if (!response.ok) {\r\n            return Promise.reject(\"We couldn't post fav to server.\");\r\n          }\r\n          console.info(\"Posted offline favs to api successfully\");\r\n          return response.json();\r\n        });\r\n      }\r\n      return null;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch restaurants by a cuisine type with proper error handling.\r\n   */\r\n  static fetchRestaurantByCuisine(cuisine, callback) {\r\n    // Fetch all restaurants  with proper error handling\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Filter restaurants to have only given cuisine type\r\n        const results = restaurants.filter(r => r.cuisine_type == cuisine);\r\n        callback(null, results);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch restaurants by a neighborhood with proper error handling.\r\n   */\r\n  static fetchRestaurantByNeighborhood(neighborhood, callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Filter restaurants to have only given neighborhood\r\n        const results = restaurants.filter(r => r.neighborhood == neighborhood);\r\n        callback(null, results);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch restaurants by a cuisine and a neighborhood with proper error handling.\r\n   */\r\n  static fetchRestaurantByCuisineAndNeighborhood(\r\n    cuisine,\r\n    neighborhood,\r\n    callback\r\n  ) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        let results = restaurants;\r\n        if (cuisine != \"all\") {\r\n          // filter by cuisine\r\n          results = results.filter(r => r.cuisine_type == cuisine);\r\n        }\r\n        if (neighborhood != \"all\") {\r\n          // filter by neighborhood\r\n          results = results.filter(r => r.neighborhood == neighborhood);\r\n        }\r\n        callback(null, results);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch all neighborhoods with proper error handling.\r\n   */\r\n  static fetchNeighborhoods(callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Get all neighborhoods from all restaurants\r\n        const neighborhoods = restaurants.map(\r\n          (v, i) => restaurants[i].neighborhood\r\n        );\r\n        // Remove duplicates from neighborhoods\r\n        const uniqueNeighborhoods = neighborhoods.filter(\r\n          (v, i) => neighborhoods.indexOf(v) == i\r\n        );\r\n        callback(null, uniqueNeighborhoods);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch all cuisines with proper error handling.\r\n   */\r\n  static fetchCuisines(callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Get all cuisines from all restaurants\r\n        const cuisines = restaurants.map((v, i) => restaurants[i].cuisine_type);\r\n        // Remove duplicates from cuisines\r\n        const uniqueCuisines = cuisines.filter(\r\n          (v, i) => cuisines.indexOf(v) == i\r\n        );\r\n        callback(null, uniqueCuisines);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Restaurant page URL.\r\n   */\r\n  static urlForRestaurant(restaurant) {\r\n    return `./restaurant.html?id=${restaurant.id}`;\r\n  }\r\n\r\n  /**\r\n   * Restaurant image URL.\r\n   */\r\n  static imageUrlForRestaurant(restaurant) {\r\n    const url = `./img/${restaurant.photograph || restaurant.id}-medium.jpg`;\r\n\r\n    return url;\r\n  }\r\n\r\n  /**\r\n   * Restaurant srcset attribute for browser to decide best resolution. It uses restaurant.photograph\r\n   * and fallbacks to restaurant.id if former is missing.\r\n   */\r\n  static imageSrcsetForRestaurant(restaurant) {\r\n    const imageSrc = `./img/${restaurant.photograph || restaurant.id}`;\r\n    return `${imageSrc}-small.jpg 300w,\r\n            ${imageSrc}-medium.jpg 600w,\r\n            ${imageSrc}-large.jpg 800w`;\r\n  }\r\n\r\n  /**\r\n   * Restaurant sizes attribute so browser knows image sizes before deciding\r\n   * what image to download.\r\n   */\r\n  static imageSizesForRestaurant(restaurant) {\r\n    return `(max-width: 360px) 280px,\r\n            (max-width: 600px) 600px,\r\n            400px`;\r\n  }\r\n\r\n  static mapMarkerForRestaurant(restaurant, map) {\r\n    const marker = new google.maps.Marker({\r\n      position: restaurant.latlng,\r\n      title: restaurant.name,\r\n      url: DBHelper.urlForRestaurant(restaurant),\r\n      map: map,\r\n      animation: google.maps.Animation.DROP\r\n    });\r\n    return marker;\r\n  }\r\n}\r\n","import idb from \"idb\";\r\n\r\nconst dbPromise = {\r\n  // creation and updating of database happens here.\r\n  db: idb.open(\"restaurant-reviews-db\", 3, function (upgradeDb) {\r\n    switch (upgradeDb.oldVersion) {\r\n      case 0:\r\n        upgradeDb.createObjectStore(\"restaurants\", { keyPath: \"id\" });\r\n      case 1:\r\n        upgradeDb\r\n          .createObjectStore(\"reviews\", { keyPath: \"id\" })\r\n          .createIndex(\"restaurant_id\", \"restaurant_id\");\r\n      case 2:\r\n        upgradeDb\r\n          .createObjectStore(\"offline\", { autoIncrement: true, keyPath: \"id\" })\r\n          .createIndex(\"restaurant_id\", \"restaurant_id\");\r\n      case 3:\r\n        upgradeDb\r\n          .createObjectStore(\"offline-fav\", { autoIncrement: true, keyPath: \"id\" })\r\n          .createIndex(\"restaurant_id\", \"restaurant_id\");\r\n    }\r\n  }),\r\n\r\n  /**\r\n   * Save restaurant\r\n   */\r\n  putRestaurants(restaurants, forceUpdate = false) {\r\n    if (!restaurants.push) restaurants = [restaurants];\r\n    return this.db.then(db => {\r\n      const store = db\r\n        .transaction(\"restaurants\", \"readwrite\")\r\n        .objectStore(\"restaurants\");\r\n      Promise.all(\r\n        restaurants.map(apiRestaurant => {\r\n          return store.get(apiRestaurant.id).then(idbRestaurant => {\r\n            if (forceUpdate) return store.put(apiRestaurant);\r\n            if (\r\n              !idbRestaurant ||\r\n              new Date(apiRestaurant.updatedAt) >\r\n              new Date(idbRestaurant.updatedAt)\r\n            ) {\r\n              return store.put(apiRestaurant);\r\n            }\r\n          });\r\n        })\r\n      ).then(function () {\r\n        return store.complete;\r\n      });\r\n    });\r\n  },\r\n\r\n  putFavorite(id, boolean) {\r\n    return this.db\r\n      .then((db) => {\r\n        const store = db\r\n          .transaction(\"restaurants\", \"readwrite\")\r\n          .objectStore(\"restaurants\");\r\n\r\n        store.get(id)\r\n          .then((idbRestaurant) => {\r\n            idbRestaurant.is_favorite = boolean.toString();\r\n\r\n            store.put(idbRestaurant);\r\n\r\n            return store.complete;\r\n          })\r\n      }).then(() => {\r\n        console.info('Updated fav in idb');\r\n      }).catch((err) => {\r\n        console.error('Error updating fav in idb', err);\r\n      })\r\n  },\r\n\r\n  /**\r\n   * Get restaurant\r\n   */\r\n  getRestaurants(id = undefined) {\r\n    return this.db.then(db => {\r\n      const store = db.transaction(\"restaurants\").objectStore(\"restaurants\");\r\n      if (id) return store.get(Number(id));\r\n      return store.getAll();\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Save reviews\r\n   */\r\n  putReviews(reviews) {\r\n    if (!reviews.push) reviews = [reviews];\r\n    return this.db.then(db => {\r\n      const store = db\r\n        .transaction(\"reviews\", \"readwrite\")\r\n        .objectStore(\"reviews\");\r\n      Promise.all(\r\n        reviews.map(apiReview => {\r\n          return store.get(apiReview.id).then(idbReview => {\r\n            if (\r\n              !idbReview ||\r\n              new Date(apiReview.updatedAt) > new Date(idbReview.updatedAt)\r\n            ) {\r\n              return store.put(apiReview);\r\n            }\r\n          });\r\n        })\r\n      ).then(function () {\r\n        return store.complete;\r\n      });\r\n    });\r\n  },\r\n\r\n  getReviewsForRestaurant(id) {\r\n    return this.db.then(db => {\r\n      const storeIndex = db\r\n        .transaction(\"reviews\")\r\n        .objectStore(\"reviews\")\r\n        .index(\"restaurant_id\");\r\n      return storeIndex.getAll(Number(id));\r\n    });\r\n  },\r\n\r\n  // Storing offline reviews to offline idb collection\r\n  putOfflineReview(review) {\r\n    return this.db\r\n      .then(db => {\r\n        const store = db.transaction(\"offline\", \"readwrite\").objectStore(\"offline\");\r\n        store.put(review);\r\n\r\n        return store.complete;\r\n      })\r\n      .then(() => {\r\n        console.info('Saved a review to idb while offline');\r\n        // navigator.serviceWorker.ready.then(registration => {\r\n        //   return registration.sync.register(\"flush\");\r\n        // });\r\n      });\r\n  },\r\n\r\n  // Getting whatever I have in the offline idb collection\r\n  getOfflineReviews() {\r\n    return this.db\r\n      .then(db => {\r\n        const store = db.transaction(\"offline\", \"readonly\").objectStore(\"offline\");\r\n\r\n        return store.getAll();\r\n      })\r\n      .then(() => {\r\n        console.info('Retrieved offline reviews');\r\n      });\r\n  },\r\n\r\n  // Clearing whatever I have in the offline idb collection\r\n  clearOfflineReviews() {\r\n    return this.db\r\n      .then(db => {\r\n        const store = db.transaction(\"offline\", \"readwrite\").objectStore(\"offline\");\r\n        store.clear();\r\n\r\n        return store;\r\n      })\r\n      .then((res) => {\r\n        console.warning('Deleted offline reviews', res);\r\n      });\r\n  },\r\n\r\n  // Storing offline favs to offline idb collection\r\n  putOfflinefav(fav) {\r\n    return this.db\r\n      .then(db => {\r\n        const store = db.transaction(\"offline-fav\", \"readwrite\").objectStore(\"offline-fav\");\r\n        store.put(fav);\r\n\r\n        return store.complete;\r\n      })\r\n      .then(() => {\r\n        console.info('Saved a fav to idb while offline');\r\n        // navigator.serviceWorker.ready.then(registration => {\r\n        //   return registration.sync.register(\"flush\");\r\n        // });\r\n      });\r\n  },\r\n\r\n  // Getting whatever I have in the offline idb collection\r\n  getOfflinefavs() {\r\n    return this.db\r\n      .then(db => {\r\n        const store = db.transaction(\"offline-fav\", \"readonly\").objectStore(\"offline-fav\");\r\n\r\n        return store.getAll();\r\n      })\r\n      .then(() => {\r\n        console.info('Retrieved offline favs');\r\n      });\r\n  },\r\n\r\n  // Clearing whatever I have in the offline idb collection\r\n  clearOfflinefavs() {\r\n    return this.db\r\n      .then(db => {\r\n        const store = db.transaction(\"offline-fav\", \"readwrite\").objectStore(\"offline-fav\");\r\n        store.clear();\r\n\r\n        return store;\r\n      })\r\n      .then((res) => {\r\n        console.warning('Deleted offline favs', res);\r\n      });\r\n  },\r\n\r\n};\r\n\r\nexport default dbPromise;\r\n","import DBHelper from \"./dbhelper\";\nimport dbPromise from \"./dbpromise\";\n\nfunction handleClick(e) {\n  e.preventDefault();\n\n  const restaurantId = this.dataset.id;\n  const fav = this.getAttribute('aria-pressed') == 'true';\n  const url = `${DBHelper.API_URL}/restaurants/${restaurantId}/?is_favorite=${!fav}`;\n  const PUT = { method: 'PUT' };\n\n  // If we are offline\n  if (!navigator.onLine) {\n    console.info('App was offline, when you tried to send fav');\n    dbPromise.putOfflinefav(!fav);\n    this.setAttribute('aria-pressed', !fav);\n\n  } else {\n    // If we are online\n    return fetch(url, PUT).then(response => {\n      return response.json();\n    }).then(updatedRestaurant => {\n      // update restaurant on idb\n      dbPromise.putRestaurants(updatedRestaurant, true);\n      // change state of toggle button\n      this.setAttribute('aria-pressed', !fav);\n      return updatedRestaurant;\n    }).catch((err) => {\n      console.error('Couldnt update fav in API', err);\n    });\n  }\n\n}\n\n\n\nexport default function favoriteButton(restaurant) {\n  const button = document.createElement('button');\n  button.innerHTML = \"&#x2764;\";\n  button.className = \"fav-restaurant\";\n  button.dataset.id = restaurant.id;\n  button.setAttribute('aria-label', `Save ${restaurant.name} as a favorite`);\n  button.setAttribute('aria-pressed', restaurant.is_favorite);\n  button.onclick = handleClick;\n\n  return button;\n}\n","import DBHelper from \"./dbhelper\";\nimport dbPromise from \"./dbpromise\";\n\nfunction handleClick(e) {\n  e.preventDefault();\n\n  const restaurantId = this.dataset.id;\n  const fav = this.getAttribute('aria-pressed') == 'true';\n  const url = `${DBHelper.API_URL}/restaurants/${restaurantId}/?is_favorite=${!fav}`;\n  const PUT = { method: 'PUT' };\n\n  // If we are offline\n  if (!navigator.onLine) {\n    console.info('App was offline, when you tried to send fav');\n    dbPromise.putOfflinefav(!fav);\n    this.setAttribute('aria-pressed', !fav);\n\n  } else {\n    // If we are online\n    return fetch(url, PUT).then(response => {\n      return response.json();\n    }).then(updatedRestaurant => {\n      // update restaurant on idb\n      dbPromise.putRestaurants(updatedRestaurant, true);\n      // change state of toggle button\n      this.setAttribute('aria-pressed', !fav);\n      return updatedRestaurant;\n    }).catch((err) => {\n      console.error('Couldnt update fav in API', err);\n    });\n  }\n\n}\n\n\n\nexport default function favoriteButton(restaurant) {\n  const button = document.createElement('button');\n  button.innerHTML = \"&#x2764;\";\n  button.className = \"fav-restaurant\";\n  button.dataset.id = restaurant.id;\n  button.setAttribute('aria-label', `Save ${restaurant.name} as a favorite`);\n  button.setAttribute('aria-pressed', restaurant.is_favorite);\n  button.onclick = handleClick;\n\n  return button;\n}\n","/*! lozad.js - v1.7.0 - 2018-11-08\r\n* https://github.com/ApoorvSaxena/lozad.js\r\n* Copyright (c) 2018 Apoorv Saxena; Licensed MIT */\r\n!function(t,e){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=e():\"function\"===typeof define&&define.amd?define(e):t.lozad=e()}(this,() => {\"use strict\";var g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},r=\"undefined\"!=typeof document&&document.documentMode,l={rootMargin:\"0px\",threshold:0,load:function(t){if(\"picture\"===t.nodeName.toLowerCase()){var e=document.createElement(\"img\");r&&t.getAttribute(\"data-iesrc\")&&(e.src=t.getAttribute(\"data-iesrc\")),t.getAttribute(\"data-alt\")&&(e.alt=t.getAttribute(\"data-alt\")),t.appendChild(e)}t.getAttribute(\"data-src\")&&(t.src=t.getAttribute(\"data-src\")),t.getAttribute(\"data-srcset\")&&t.setAttribute(\"srcset\",t.getAttribute(\"data-srcset\")),t.getAttribute(\"data-background-image\")&&(t.style.backgroundImage=\"url('\"+t.getAttribute(\"data-background-image\")+\"')\"),t.getAttribute(\"data-toggle-class\")&&t.classList.toggle(t.getAttribute(\"data-toggle-class\"))},loaded:function(){}};\r\n/**\r\n   * Detect IE browser\r\n   * @const {boolean}\r\n   * @private\r\n   */function f(t){t.setAttribute(\"data-loaded\",!0)}var b=function(t){return\"true\"===t.getAttribute(\"data-loaded\")};return function(){var r,o,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:\".lozad\",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=g({},l,t),n=e.root,i=e.rootMargin,d=e.threshold,u=e.load,c=e.loaded,s=void 0;return window.IntersectionObserver&&(s=new IntersectionObserver((r=u,o=c,function(t,e){t.forEach(function(t){(0<t.intersectionRatio||t.isIntersecting)&&(e.unobserve(t.target),b(t.target)||(r(t.target),f(t.target),o(t.target)))})}),{root:n,rootMargin:i,threshold:d})),{observe:function(){for(var t=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return t instanceof Element?[t]:t instanceof NodeList?t:e.querySelectorAll(t)}(a,n),e=0;e<t.length;e++)b(t[e])||(s?s.observe(t[e]):(u(t[e]),f(t[e]),c(t[e])))},triggerLoad:function(t){b(t)||(u(t),f(t),c(t))},observer:s}}});\r\n","\"use-strict\";\r\n\r\nimport DBHelper from \"./dbhelper\";\r\nimport \"./register\";\r\nimport \"./browser\";\r\nimport \"./favoritebutton\";\r\nimport favoriteButton from \"./favoriteButton\";\r\nimport \"./lozad\";\r\n\r\nlet restaurants, neighborhoods, cuisines;\r\nvar newMap;\r\nvar markers = [];\r\n\r\n/**\r\n * Fetch neighborhoods and cuisines as soon as the page is loaded.\r\n */\r\ndocument.addEventListener(\"DOMContentLoaded\", event => {\r\n  fetchNeighborhoods();\r\n  fetchCuisines();\r\n  const observer = lozad(); // lazy loads elements with default selector as '.lozad'\r\n  observer.observe();\r\n});\r\n\r\n/**\r\n * Fetch all neighborhoods and set their HTML.\r\n */\r\nconst fetchNeighborhoods = () => {\r\n  DBHelper.fetchNeighborhoods((error, neighborhoods) => {\r\n    if (error) {\r\n      // Got an error\r\n      console.error(error);\r\n    } else {\r\n      self.neighborhoods = neighborhoods;\r\n      fillNeighborhoodsHTML();\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Set neighborhoods HTML.\r\n */\r\nconst fillNeighborhoodsHTML = (neighborhoods = self.neighborhoods) => {\r\n  const select = document.getElementById(\"neighborhoods-select\");\r\n  neighborhoods.forEach(neighborhood => {\r\n    const option = document.createElement(\"option\");\r\n    option.innerHTML = neighborhood;\r\n    option.value = neighborhood;\r\n    // Aria role needs to be dynamically added too\r\n    option.setAttribute(\"role\", \"option\");\r\n    select.append(option);\r\n  });\r\n};\r\n\r\n/**\r\n * Fetch all cuisines and set their HTML.\r\n */\r\nconst fetchCuisines = () => {\r\n  DBHelper.fetchCuisines((error, cuisines) => {\r\n    if (error) {\r\n      // Got an error!\r\n      console.error(error);\r\n    } else {\r\n      self.cuisines = cuisines;\r\n      fillCuisinesHTML();\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Set cuisines HTML.\r\n */\r\nconst fillCuisinesHTML = (cuisines = self.cuisines) => {\r\n  const select = document.getElementById(\"cuisines-select\");\r\n\r\n  cuisines.forEach(cuisine => {\r\n    const option = document.createElement(\"option\");\r\n    option.innerHTML = cuisine;\r\n    option.value = cuisine;\r\n    // Aria role needs to be dynamically added too\r\n    option.setAttribute(\"role\", \"option\");\r\n    select.append(option);\r\n  });\r\n};\r\n\r\n/**\r\n * Update page and map for current restaurants.\r\n */\r\nwindow.updateRestaurants = () => {\r\n  const cSelect = document.getElementById(\"cuisines-select\");\r\n  const nSelect = document.getElementById(\"neighborhoods-select\");\r\n\r\n  const cIndex = cSelect.selectedIndex;\r\n  const nIndex = nSelect.selectedIndex;\r\n\r\n  const cuisine = cSelect[cIndex].value;\r\n  const neighborhood = nSelect[nIndex].value;\r\n\r\n  DBHelper.fetchRestaurantByCuisineAndNeighborhood(\r\n    cuisine,\r\n    neighborhood,\r\n    (error, restaurants) => {\r\n      if (error) {\r\n        // Got an error!\r\n        console.error(error);\r\n      } else {\r\n        resetRestaurants(restaurants);\r\n        fillRestaurantsHTML();\r\n      }\r\n    }\r\n  );\r\n};\r\nconst toggleClass = e => {\r\n  const staticMapEl = document.getElementById(\"map-img\");\r\n  const mapEl = document.getElementById(\"map\");\r\n\r\n  if (mapEl.className === \"hidden\") {\r\n    mapEl.className = \"\";\r\n    staticMapEl.className = \"hidden\";\r\n  } else {\r\n    mapEl.className = \"hidden\";\r\n    // staticMapEl.src=getStaticMapUrl();\r\n    staticMapEl.className = \"\";\r\n  }\r\n};\r\nconst getStaticMapUrl = mark => {\r\n  const baseUrl = \"https://maps.googleapis.com/maps/api/staticmap?\";\r\n  const key = \"AIzaSyA4ISihvtXNswa92tcB_pu30DdB7lHn3c4\";\r\n  const format = \"jpg&\";\r\n  const staticMarkers = ` markers=color:red|40.713829,-73.989667&\r\n                          markers=color:red|40.747143,-73.985414&\r\n                          markers=color:red|40.683555,-73.966393&\r\n                          markers=color:red|40.722216,-73.987501&\r\n                          markers=color:red|40.705089,-73.933585&\r\n                          markers=color:red|40.674925,-74.016162&\r\n                          markers=color:red|40.727397,-73.983645&\r\n                          markers=color:red|40.726584,-74.002082&\r\n                          markers=color:red|40.743797,-73.950652&\r\n                          markers=color:red|40.743394,-73.954235&`;\r\n  const width = 900;\r\n  const height = 400;\r\n  const centerZoomSize = `center=40.722216,-73.987501&zoom=11&size=${width}x${height}&f&`;\r\n\r\n  const url = baseUrl + centerZoomSize + format + staticMarkers + key;\r\n\r\n  return url;\r\n};\r\n\r\nwindow.initMap = () => {\r\n  let loc = {\r\n    lat: 40.722216,\r\n    lng: -73.987501\r\n  };\r\n  newMap = new google.maps.Map(document.getElementById(\"map\"), {\r\n    zoom: 12,\r\n    center: loc,\r\n    scrollwheel: false\r\n  });\r\n  updateRestaurants();\r\n\r\n  // Google map makes a bunch of links that steal focus of a screen reader\r\n  // Going to add an event that sets attribute to all of these items\r\n  const mapEl = document.getElementById(\"map\");\r\n\r\n  mapEl.addEventListener(\"keydown\", () => {\r\n    const mapLinks = mapEl.querySelectorAll(\"a\");\r\n    mapLinks.forEach(link => link.setAttribute(\"tabindex\", \"-1\"));\r\n  });\r\n};\r\n\r\n/**\r\n * Clear current restaurants, their HTML and remove their map markers.\r\n */\r\nconst resetRestaurants = restaurants => {\r\n  // Remove all restaurants\r\n  self.restaurants = [];\r\n  const ul = document.getElementById(\"restaurants-list\");\r\n  ul.innerHTML = \"\";\r\n\r\n  // Remove all map markers\r\n  if (markers) {\r\n    markers.forEach(marker => marker.setMap(null));\r\n    markers = [];\r\n  }\r\n  self.restaurants = restaurants;\r\n};\r\n\r\n/**\r\n * Create all restaurants HTML and add them to the webpage.\r\n */\r\nconst fillRestaurantsHTML = (restaurants = self.restaurants) => {\r\n  const ul = document.getElementById(\"restaurants-list\");\r\n  restaurants.forEach(restaurant => {\r\n    ul.append(createRestaurantHTML(restaurant));\r\n  });\r\n  addMarkersToMap();\r\n};\r\n\r\n/**\r\n * Create restaurant HTML.\r\n */\r\nconst createRestaurantHTML = restaurant => {\r\n  const li = document.createElement(\"li\");\r\n  const image = document.createElement(\"img\");\r\n  image.className = \"restaurant-img\";\r\n  image.classList.add(\"lozad\");\r\n  image.src = DBHelper.imageUrlForRestaurant(restaurant);\r\n  image.srcset = DBHelper.imageSrcsetForRestaurant(restaurant);\r\n  image.sizes = DBHelper.imageSizesForRestaurant(restaurant);\r\n  image.alt = `${restaurant.name}, promotional image.`;\r\n  li.append(image);\r\n\r\n  const name = document.createElement(\"h2\");\r\n  name.innerHTML = restaurant.name;\r\n  li.append(name);\r\n\r\n  const fav = favoriteButton(restaurant);\r\n  fav.alt = `Save ${restaurant.name} as a favorite`;\r\n  li.append(fav);\r\n\r\n  const neighborhood = document.createElement(\"p\");\r\n  neighborhood.innerHTML = restaurant.neighborhood;\r\n  li.append(neighborhood);\r\n\r\n  const address = document.createElement(\"p\");\r\n  const addressArray = restaurant.address.split(\",\");\r\n  const cityStateZip = document.createElement(\"p\");\r\n  const more = document.createElement(\"a\");\r\n  const url = DBHelper.urlForRestaurant(restaurant);\r\n\r\n  address.innerHTML = addressArray[0];\r\n  cityStateZip.innerHTML = `${addressArray[1]}, ${addressArray[2]}`;\r\n\r\n  li.append(address);\r\n  li.append(cityStateZip);\r\n\r\n  more.className = \"view-details-btn\";\r\n  more.innerHTML = \"View Details\";\r\n  more.type = \"Button\";\r\n  more.setAttribute(\"role\", \"button\");\r\n  more.setAttribute(\"aria-label\", `View more details about ${restaurant.name}`);\r\n  more.href = url;\r\n  name.addEventListener(\"click\", event => {\r\n    window.location = url;\r\n  });\r\n\r\n  li.setAttribute(\r\n    \"aria-label\",\r\n    `${restaurant.name} is an ${restaurant.cuisine_type} restaurant in ${\r\n      restaurant.neighborhood\r\n    }`\r\n  );\r\n  li.setAttribute(\"tabindex\", \"0\");\r\n\r\n  li.append(more);\r\n\r\n  return li;\r\n};\r\n\r\nconst addMarkersToMap = (restaurants = self.restaurants) => {\r\n  restaurants.forEach(restaurant => {\r\n    // Add marker to the map\r\n    const marker = DBHelper.mapMarkerForRestaurant(restaurant, newMap);\r\n    google.maps.event.addListener(marker, \"click\", () => {\r\n      window.location.href = marker.url;\r\n    });\r\n    markers.push(marker);\r\n  });\r\n};\r\n","const { serviceWorker } = navigator;\r\n\r\nconst registerServiceWorker = () => {\r\n  if (\"serviceWorker\" in navigator) {\r\n    serviceWorker\r\n      .register(\"./sw.js\", { scope: \"./\" })\r\n      .then(registration => {\r\n        console.info(\"Service worker registered\", registration.scope);\r\n        const sw = {};\r\n\r\n        if (registration.installing) {\r\n          sw.status = registration.installing;\r\n          console.info(\"Service worker installing\");\r\n        }\r\n\r\n        if (registration.waiting) {\r\n          sw.status = registration.waiting;\r\n          console.warn(\"Service worker waiting\");\r\n        }\r\n\r\n        if (registration.active) {\r\n          sw.status = registration.active;\r\n          console.info(\"Service worker active\");\r\n        }\r\n\r\n        if ('sync' in  registration) {\r\n            console.info(\"Sync active\");\r\n          }\r\n\r\n        if (sw.status) {\r\n          console.log(\"Service worker state:\", sw.status.state);\r\n          sw.status.addEventListener(\"statechange\", e => {\r\n            console.log(\"Service worker state:\", e.target.state);\r\n          });\r\n        }\r\n        return null;\r\n      })\r\n      .catch(err => {\r\n        console.error(\"Service worker installation failed\", err);\r\n        // loadPage();\r\n      });\r\n  }\r\n\r\n  // If you end up here serviceworker is not supported\r\n  //loadPage();\r\n};\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", event => {\r\n  registerServiceWorker();\r\n});\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvaWRiL2xpYi9pZGIuanMiLCJzcmMvanMvYnJvd3Nlci5qcyIsInNyYy9qcy9kYmhlbHBlci5qcyIsInNyYy9qcy9kYnByb21pc2UuanMiLCJzcmMvanMvZmF2b3JpdGVCdXR0b24uanMiLCJzcmMvanMvZmF2b3JpdGVidXR0b24uanMiLCJzcmMvanMvbG96YWQuanMiLCJzcmMvanMvbWFpbi5qcyIsInNyYy9qcy9yZWdpc3Rlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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UUFBQSxPQUFPLENBQUMsSUFBUixDQUFhLGFBQWI7QUFDRDs7QUFFSCxVQUFJLEVBQUUsQ0FBQyxNQUFQLEVBQWU7QUFDYixRQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksdUJBQVosRUFBcUMsRUFBRSxDQUFDLE1BQUgsQ0FBVSxLQUEvQztBQUNBLFFBQUEsRUFBRSxDQUFDLE1BQUgsQ0FBVSxnQkFBVixDQUEyQixhQUEzQixFQUEwQyxVQUFBLENBQUMsRUFBSTtBQUM3QyxVQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksdUJBQVosRUFBcUMsQ0FBQyxDQUFDLE1BQUYsQ0FBUyxLQUE5QztBQUNELFNBRkQ7QUFHRDs7QUFDRCxhQUFPLElBQVA7QUFDRCxLQWhDSCxFQWlDRyxLQWpDSCxDQWlDUyxVQUFBLEdBQUcsRUFBSTtBQUNaLE1BQUEsT0FBTyxDQUFDLEtBQVIsQ0FBYyxvQ0FBZCxFQUFvRCxHQUFwRCxFQURZLENBRVo7QUFDRCxLQXBDSDtBQXFDRCxHQXZDaUMsQ0F5Q2xDO0FBQ0E7O0FBQ0QsQ0EzQ0Q7O0FBNkNBLFFBQVEsQ0FBQyxnQkFBVCxDQUEwQixrQkFBMUIsRUFBOEMsVUFBQSxLQUFLLEVBQUk7QUFDckQsRUFBQSxxQkFBcUI7QUFDdEIsQ0FGRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiB0b0FycmF5KGFycikge1xuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICB9O1xuXG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3RDYWxsKG9iaiwgbWV0aG9kLCBhcmdzKSB7XG4gICAgdmFyIHJlcXVlc3Q7XG4gICAgdmFyIHAgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlcXVlc3QgPSBvYmpbbWV0aG9kXS5hcHBseShvYmosIGFyZ3MpO1xuICAgICAgcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBwLnJlcXVlc3QgPSByZXF1ZXN0O1xuICAgIHJldHVybiBwO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvbWlzaWZ5Q3Vyc29yUmVxdWVzdENhbGwob2JqLCBtZXRob2QsIGFyZ3MpIHtcbiAgICB2YXIgcCA9IHByb21pc2lmeVJlcXVlc3RDYWxsKG9iaiwgbWV0aG9kLCBhcmdzKTtcbiAgICByZXR1cm4gcC50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAoIXZhbHVlKSByZXR1cm47XG4gICAgICByZXR1cm4gbmV3IEN1cnNvcih2YWx1ZSwgcC5yZXF1ZXN0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5UHJvcGVydGllcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcm94eUNsYXNzLnByb3RvdHlwZSwgcHJvcCwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0aGlzW3RhcmdldFByb3BdW3Byb3BdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgIHRoaXNbdGFyZ2V0UHJvcF1bcHJvcF0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlSZXF1ZXN0TWV0aG9kcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBDb25zdHJ1Y3RvciwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBpZiAoIShwcm9wIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICAgIFByb3h5Q2xhc3MucHJvdG90eXBlW3Byb3BdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0Q2FsbCh0aGlzW3RhcmdldFByb3BdLCBwcm9wLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5TWV0aG9kcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBDb25zdHJ1Y3RvciwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBpZiAoIShwcm9wIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICAgIFByb3h5Q2xhc3MucHJvdG90eXBlW3Byb3BdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzW3RhcmdldFByb3BdW3Byb3BdLmFwcGx5KHRoaXNbdGFyZ2V0UHJvcF0sIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBDb25zdHJ1Y3RvciwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBpZiAoIShwcm9wIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICAgIFByb3h5Q2xhc3MucHJvdG90eXBlW3Byb3BdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNpZnlDdXJzb3JSZXF1ZXN0Q2FsbCh0aGlzW3RhcmdldFByb3BdLCBwcm9wLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEluZGV4KGluZGV4KSB7XG4gICAgdGhpcy5faW5kZXggPSBpbmRleDtcbiAgfVxuXG4gIHByb3h5UHJvcGVydGllcyhJbmRleCwgJ19pbmRleCcsIFtcbiAgICAnbmFtZScsXG4gICAgJ2tleVBhdGgnLFxuICAgICdtdWx0aUVudHJ5JyxcbiAgICAndW5pcXVlJ1xuICBdKTtcblxuICBwcm94eVJlcXVlc3RNZXRob2RzKEluZGV4LCAnX2luZGV4JywgSURCSW5kZXgsIFtcbiAgICAnZ2V0JyxcbiAgICAnZ2V0S2V5JyxcbiAgICAnZ2V0QWxsJyxcbiAgICAnZ2V0QWxsS2V5cycsXG4gICAgJ2NvdW50J1xuICBdKTtcblxuICBwcm94eUN1cnNvclJlcXVlc3RNZXRob2RzKEluZGV4LCAnX2luZGV4JywgSURCSW5kZXgsIFtcbiAgICAnb3BlbkN1cnNvcicsXG4gICAgJ29wZW5LZXlDdXJzb3InXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIEN1cnNvcihjdXJzb3IsIHJlcXVlc3QpIHtcbiAgICB0aGlzLl9jdXJzb3IgPSBjdXJzb3I7XG4gICAgdGhpcy5fcmVxdWVzdCA9IHJlcXVlc3Q7XG4gIH1cblxuICBwcm94eVByb3BlcnRpZXMoQ3Vyc29yLCAnX2N1cnNvcicsIFtcbiAgICAnZGlyZWN0aW9uJyxcbiAgICAna2V5JyxcbiAgICAncHJpbWFyeUtleScsXG4gICAgJ3ZhbHVlJ1xuICBdKTtcblxuICBwcm94eVJlcXVlc3RNZXRob2RzKEN1cnNvciwgJ19jdXJzb3InLCBJREJDdXJzb3IsIFtcbiAgICAndXBkYXRlJyxcbiAgICAnZGVsZXRlJ1xuICBdKTtcblxuICAvLyBwcm94eSAnbmV4dCcgbWV0aG9kc1xuICBbJ2FkdmFuY2UnLCAnY29udGludWUnLCAnY29udGludWVQcmltYXJ5S2V5J10uZm9yRWFjaChmdW5jdGlvbihtZXRob2ROYW1lKSB7XG4gICAgaWYgKCEobWV0aG9kTmFtZSBpbiBJREJDdXJzb3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgIEN1cnNvci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjdXJzb3IgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgY3Vyc29yLl9jdXJzb3JbbWV0aG9kTmFtZV0uYXBwbHkoY3Vyc29yLl9jdXJzb3IsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdChjdXJzb3IuX3JlcXVlc3QpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm47XG4gICAgICAgICAgcmV0dXJuIG5ldyBDdXJzb3IodmFsdWUsIGN1cnNvci5fcmVxdWVzdCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gT2JqZWN0U3RvcmUoc3RvcmUpIHtcbiAgICB0aGlzLl9zdG9yZSA9IHN0b3JlO1xuICB9XG5cbiAgT2JqZWN0U3RvcmUucHJvdG90eXBlLmNyZWF0ZUluZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBJbmRleCh0aGlzLl9zdG9yZS5jcmVhdGVJbmRleC5hcHBseSh0aGlzLl9zdG9yZSwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgT2JqZWN0U3RvcmUucHJvdG90eXBlLmluZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBJbmRleCh0aGlzLl9zdG9yZS5pbmRleC5hcHBseSh0aGlzLl9zdG9yZSwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgW1xuICAgICduYW1lJyxcbiAgICAna2V5UGF0aCcsXG4gICAgJ2luZGV4TmFtZXMnLFxuICAgICdhdXRvSW5jcmVtZW50J1xuICBdKTtcblxuICBwcm94eVJlcXVlc3RNZXRob2RzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgSURCT2JqZWN0U3RvcmUsIFtcbiAgICAncHV0JyxcbiAgICAnYWRkJyxcbiAgICAnZGVsZXRlJyxcbiAgICAnY2xlYXInLFxuICAgICdnZXQnLFxuICAgICdnZXRBbGwnLFxuICAgICdnZXRLZXknLFxuICAgICdnZXRBbGxLZXlzJyxcbiAgICAnY291bnQnXG4gIF0pO1xuXG4gIHByb3h5Q3Vyc29yUmVxdWVzdE1ldGhvZHMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBJREJPYmplY3RTdG9yZSwgW1xuICAgICdvcGVuQ3Vyc29yJyxcbiAgICAnb3BlbktleUN1cnNvcidcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgSURCT2JqZWN0U3RvcmUsIFtcbiAgICAnZGVsZXRlSW5kZXgnXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIFRyYW5zYWN0aW9uKGlkYlRyYW5zYWN0aW9uKSB7XG4gICAgdGhpcy5fdHggPSBpZGJUcmFuc2FjdGlvbjtcbiAgICB0aGlzLmNvbXBsZXRlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBpZGJUcmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH07XG4gICAgICBpZGJUcmFuc2FjdGlvbi5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChpZGJUcmFuc2FjdGlvbi5lcnJvcik7XG4gICAgICB9O1xuICAgICAgaWRiVHJhbnNhY3Rpb24ub25hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QoaWRiVHJhbnNhY3Rpb24uZXJyb3IpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5vYmplY3RTdG9yZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgT2JqZWN0U3RvcmUodGhpcy5fdHgub2JqZWN0U3RvcmUuYXBwbHkodGhpcy5fdHgsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhUcmFuc2FjdGlvbiwgJ190eCcsIFtcbiAgICAnb2JqZWN0U3RvcmVOYW1lcycsXG4gICAgJ21vZGUnXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhUcmFuc2FjdGlvbiwgJ190eCcsIElEQlRyYW5zYWN0aW9uLCBbXG4gICAgJ2Fib3J0J1xuICBdKTtcblxuICBmdW5jdGlvbiBVcGdyYWRlREIoZGIsIG9sZFZlcnNpb24sIHRyYW5zYWN0aW9uKSB7XG4gICAgdGhpcy5fZGIgPSBkYjtcbiAgICB0aGlzLm9sZFZlcnNpb24gPSBvbGRWZXJzaW9uO1xuICAgIHRoaXMudHJhbnNhY3Rpb24gPSBuZXcgVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICB9XG5cbiAgVXBncmFkZURCLnByb3RvdHlwZS5jcmVhdGVPYmplY3RTdG9yZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgT2JqZWN0U3RvcmUodGhpcy5fZGIuY3JlYXRlT2JqZWN0U3RvcmUuYXBwbHkodGhpcy5fZGIsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhVcGdyYWRlREIsICdfZGInLCBbXG4gICAgJ25hbWUnLFxuICAgICd2ZXJzaW9uJyxcbiAgICAnb2JqZWN0U3RvcmVOYW1lcydcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKFVwZ3JhZGVEQiwgJ19kYicsIElEQkRhdGFiYXNlLCBbXG4gICAgJ2RlbGV0ZU9iamVjdFN0b3JlJyxcbiAgICAnY2xvc2UnXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIERCKGRiKSB7XG4gICAgdGhpcy5fZGIgPSBkYjtcbiAgfVxuXG4gIERCLnByb3RvdHlwZS50cmFuc2FjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgVHJhbnNhY3Rpb24odGhpcy5fZGIudHJhbnNhY3Rpb24uYXBwbHkodGhpcy5fZGIsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhEQiwgJ19kYicsIFtcbiAgICAnbmFtZScsXG4gICAgJ3ZlcnNpb24nLFxuICAgICdvYmplY3RTdG9yZU5hbWVzJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoREIsICdfZGInLCBJREJEYXRhYmFzZSwgW1xuICAgICdjbG9zZSdcbiAgXSk7XG5cbiAgLy8gQWRkIGN1cnNvciBpdGVyYXRvcnNcbiAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgb25jZSBicm93c2VycyBkbyB0aGUgcmlnaHQgdGhpbmcgd2l0aCBwcm9taXNlc1xuICBbJ29wZW5DdXJzb3InLCAnb3BlbktleUN1cnNvciddLmZvckVhY2goZnVuY3Rpb24oZnVuY05hbWUpIHtcbiAgICBbT2JqZWN0U3RvcmUsIEluZGV4XS5mb3JFYWNoKGZ1bmN0aW9uKENvbnN0cnVjdG9yKSB7XG4gICAgICAvLyBEb24ndCBjcmVhdGUgaXRlcmF0ZUtleUN1cnNvciBpZiBvcGVuS2V5Q3Vyc29yIGRvZXNuJ3QgZXhpc3QuXG4gICAgICBpZiAoIShmdW5jTmFtZSBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG5cbiAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZVtmdW5jTmFtZS5yZXBsYWNlKCdvcGVuJywgJ2l0ZXJhdGUnKV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgICAgICAgdmFyIG5hdGl2ZU9iamVjdCA9IHRoaXMuX3N0b3JlIHx8IHRoaXMuX2luZGV4O1xuICAgICAgICB2YXIgcmVxdWVzdCA9IG5hdGl2ZU9iamVjdFtmdW5jTmFtZV0uYXBwbHkobmF0aXZlT2JqZWN0LCBhcmdzLnNsaWNlKDAsIC0xKSk7XG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY2FsbGJhY2socmVxdWVzdC5yZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gcG9seWZpbGwgZ2V0QWxsXG4gIFtJbmRleCwgT2JqZWN0U3RvcmVdLmZvckVhY2goZnVuY3Rpb24oQ29uc3RydWN0b3IpIHtcbiAgICBpZiAoQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEFsbCkgcmV0dXJuO1xuICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbihxdWVyeSwgY291bnQpIHtcbiAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXM7XG4gICAgICB2YXIgaXRlbXMgPSBbXTtcblxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgICAgaW5zdGFuY2UuaXRlcmF0ZUN1cnNvcihxdWVyeSwgZnVuY3Rpb24oY3Vyc29yKSB7XG4gICAgICAgICAgaWYgKCFjdXJzb3IpIHtcbiAgICAgICAgICAgIHJlc29sdmUoaXRlbXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtcy5wdXNoKGN1cnNvci52YWx1ZSk7XG5cbiAgICAgICAgICBpZiAoY291bnQgIT09IHVuZGVmaW5lZCAmJiBpdGVtcy5sZW5ndGggPT0gY291bnQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoaXRlbXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICB2YXIgZXhwID0ge1xuICAgIG9wZW46IGZ1bmN0aW9uKG5hbWUsIHZlcnNpb24sIHVwZ3JhZGVDYWxsYmFjaykge1xuICAgICAgdmFyIHAgPSBwcm9taXNpZnlSZXF1ZXN0Q2FsbChpbmRleGVkREIsICdvcGVuJywgW25hbWUsIHZlcnNpb25dKTtcbiAgICAgIHZhciByZXF1ZXN0ID0gcC5yZXF1ZXN0O1xuXG4gICAgICBpZiAocmVxdWVzdCkge1xuICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKHVwZ3JhZGVDYWxsYmFjaykge1xuICAgICAgICAgICAgdXBncmFkZUNhbGxiYWNrKG5ldyBVcGdyYWRlREIocmVxdWVzdC5yZXN1bHQsIGV2ZW50Lm9sZFZlcnNpb24sIHJlcXVlc3QudHJhbnNhY3Rpb24pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwLnRoZW4oZnVuY3Rpb24oZGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEQihkYik7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlbGV0ZTogZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3RDYWxsKGluZGV4ZWREQiwgJ2RlbGV0ZURhdGFiYXNlJywgW25hbWVdKTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBleHA7XG4gICAgbW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IG1vZHVsZS5leHBvcnRzO1xuICB9XG4gIGVsc2Uge1xuICAgIHNlbGYuaWRiID0gZXhwO1xuICB9XG59KCkpO1xuIiwibGV0IHVzZXJzQnJvd3NlcjtcclxuY29uc3QgeyB1c2VyQWdlbnQgfSA9IG5hdmlnYXRvcjtcclxuXHJcbi8vIFRoZSBvcmRlciBtYXR0ZXJzIGhlcmUsIGFuZCB0aGlzIG1heSByZXBvcnQgZmFsc2UgcG9zaXRpdmVzIGZvciB1bmxpc3RlZCBicm93c2Vycy5cclxuaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgPiAtMSkge1xyXG4gICAgdXNlcnNCcm93c2VyID0gJ01vemlsbGEgRmlyZWZveCc7XHJcbn0gZWxzZSBpZiAodXNlckFnZW50LmluZGV4T2YoJ09wZXJhJykgPiAtMSkge1xyXG4gICAgdXNlcnNCcm93c2VyID0gJ09wZXJhJztcclxufSBlbHNlIGlmICh1c2VyQWdlbnQuaW5kZXhPZignVHJpZGVudCcpID4gLTEpIHtcclxuICAgIHVzZXJzQnJvd3NlciA9ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInO1xyXG59IGVsc2UgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdFZGdlJykgPiAtMSkge1xyXG4gICAgdXNlcnNCcm93c2VyID0gJ01pY3Jvc29mdCBFZGdlJztcclxufSBlbHNlIGlmICh1c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPiAtMSkge1xyXG4gICAgdXNlcnNCcm93c2VyID0gJ0dvb2dsZSBDaHJvbWUgb3IgQ2hyb21pdW0nO1xyXG59IGVsc2UgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdTYWZhcmknKSA+IC0xKSB7XHJcbiAgICB1c2Vyc0Jyb3dzZXIgPSAnQXBwbGUgU2FmYXJpJztcclxufSBlbHNlIHtcclxuICAgIHVzZXJzQnJvd3NlciA9ICd1bmtub3duJztcclxufVxyXG5cclxuY29uc29sZS5sb2coYFlvdSBhcmUgdXNpbmc6ICR7dXNlcnNCcm93c2VyfWApO1xyXG4iLCJpbXBvcnQgZGJQcm9taXNlIGZyb20gXCIuL2RicHJvbWlzZVwiO1xyXG5cclxuLyoqXHJcbiAqIENvbW1vbiBkYXRhYmFzZSBoZWxwZXIgZnVuY3Rpb25zLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgREJIZWxwZXIge1xyXG4gIC8qKlxyXG4gICAqIEFQSSBVUkxcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0IEFQSV9VUkwoKSB7XHJcbiAgICBjb25zdCBwb3J0ID0gMTMzNzsgLy8gcG9ydCB3aGVyZSBzYWlscyBzZXJ2ZXIgd2lsbCBsaXN0ZW4uXHJcblxyXG4gICAgY29uc3QgaGVyb2t1ID0gXCJodHRwczovL3dpbm9zYWlscy5oZXJva3VhcHAuY29tXCI7XHJcbiAgICBjb25zdCBpc0xvY2FsSG9zdCA9ICgpID0+IHtcclxuICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5pbmNsdWRlcyhcImxvY2FsaG9zdFwiKSkge1xyXG4gICAgICAgIHJldHVybiBgaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9YDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB1cmwgPSBpc0xvY2FsSG9zdCgpIHx8IGhlcm9rdTtcclxuXHJcbiAgICByZXR1cm4gdXJsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggYWxsIHJlc3RhdXJhbnRzLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRzKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLnN5bmNPZmZsaW5lZmF2KClcclxuICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHhoci5vcGVuKFwiR0VUXCIsIGAke0RCSGVscGVyLkFQSV9VUkx9L3Jlc3RhdXJhbnRzYCk7XHJcbiAgICB4aHIub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdGF1cmFudHMgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgIGRiUHJvbWlzZS5wdXRSZXN0YXVyYW50cyhyZXN0YXVyYW50cyk7XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudHMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIE9vcHMhLiBHb3QgYW4gZXJyb3IgZnJvbSBzZXJ2ZXIuXHJcbiAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICBgUmVxdWVzdCBmYWlsZWQuIFJldHVybmVkIHN0YXR1cyBvZiAke3hoci5zdGF0dXN9LCB0cnlpbmcgaWRiLi4uYFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgLy8gaWYgeGhyIHJlcXVlc3QgaXNuJ3QgY29kZSAyMDAsIHRyeSBpZGJcclxuICAgICAgICBkYlByb21pc2UuZ2V0UmVzdGF1cmFudHMoKS50aGVuKGlkYlJlc3RhdXJhbnRzID0+IHtcclxuICAgICAgICAgIGlmIChpZGJSZXN0YXVyYW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgaWRiUmVzdGF1cmFudHMpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soXCJObyByZXN0YXVyYW50cyBmb3VuZCBpbiBpZGJcIiwgbnVsbCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBYSFIgbmVlZHMgZXJyb3IgaGFuZGxpbmcgZm9yIHdoZW4gc2VydmVyIGlzIGRvd24gKGRvZXNuJ3QgcmVzcG9uZCBvciBzZW5kcyBiYWNrIGNvZGVzKVxyXG4gICAgeGhyLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3Igd2hpbGUgdHJ5aW5nIFhIUiwgdHJ5aW5nIGlkYi4uLlwiKTtcclxuICAgICAgLy8gdHJ5IGlkYiwgYW5kIGlmIHdlIGdldCByZXN0YXVyYW50cyBiYWNrLCByZXR1cm4gdGhlbSwgb3RoZXJ3aXNlIHJldHVybiBhbiBlcnJvclxyXG4gICAgICBkYlByb21pc2UuZ2V0UmVzdGF1cmFudHMoKS50aGVuKGlkYlJlc3RhdXJhbnRzID0+IHtcclxuICAgICAgICBpZiAoaWRiUmVzdGF1cmFudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICBjYWxsYmFjayhudWxsLCBpZGJSZXN0YXVyYW50cyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNhbGxiYWNrKFwiTm8gcmVzdGF1cmFudHMgZm91bmQgaW4gaWRiXCIsIG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgeGhyLnNlbmQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIGEgcmVzdGF1cmFudCBieSBpdHMgSUQuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5SWQoaWQsIGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLnN5bmNPZmZsaW5lUmV2aWV3cygpO1xyXG4gICAgZmV0Y2goYCR7REJIZWxwZXIuQVBJX1VSTH0vcmVzdGF1cmFudHMvJHtpZH1gKVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaylcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIlJlc3RhdXJhbnQgY291bGRuJ3QgYmUgZmV0Y2hlZCBmcm9tIG5ldHdvcmtcIik7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZmV0Y2hlZFJlc3RhdXJhbnQgPT4ge1xyXG4gICAgICAgIC8vIGlmIHJlc3RhdXJhbnQgY291bGQgYmUgZmV0Y2hlZCBmcm9tIG5ldHdvcms6XHJcbiAgICAgICAgZGJQcm9taXNlLnB1dFJlc3RhdXJhbnRzKGZldGNoZWRSZXN0YXVyYW50KTtcclxuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgZmV0Y2hlZFJlc3RhdXJhbnQpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2gobmV0d29ya0Vycm9yID0+IHtcclxuICAgICAgICAvLyBpZiByZXN0YXVyYW50IGNvdWxkbid0IGJlIGZldGNoZWQgZnJvbSBuZXR3b3JrOlxyXG4gICAgICAgIGNvbnNvbGUubG9nKGAke25ldHdvcmtFcnJvcn0sIHRyeWluZyBpZGIuYCk7XHJcbiAgICAgICAgZGJQcm9taXNlLmdldFJlc3RhdXJhbnRzKGlkKS50aGVuKGlkYlJlc3RhdXJhbnQgPT4ge1xyXG4gICAgICAgICAgaWYgKCFpZGJSZXN0YXVyYW50KVxyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soXCJSZXN0YXVyYW50IG5vdCBmb3VuZCBpbiBpZGIgZWl0aGVyXCIsIG51bGwpO1xyXG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGlkYlJlc3RhdXJhbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIHJlc3RhdXJhbnQgcmV2aWV3cyBieSByZXN0YXVyYW50IGlkLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaHNSZXZpZXdzQnlSZXN0YXVyYW50SWQoaWQpIHtcclxuICAgIHJldHVybiBkYlByb21pc2UuZ2V0UmV2aWV3c0ZvclJlc3RhdXJhbnQoaWQpLnRoZW4oaWRiUmV2aWV3cyA9PiB7XHJcbiAgICAgIGlmICghaWRiUmV2aWV3cy5sZW5ndGgpIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oXCJObyByZXZpZXdzIGluIGlkYlwiLCBpZGJSZXZpZXdzKTtcclxuICAgICAgICBjb25zb2xlLmluZm8oXCJGZXRjaGluZyBmcm9tIEFQSVwiKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke0RCSGVscGVyLkFQSV9VUkx9L3Jldmlld3MvP3Jlc3RhdXJhbnRfaWQ9JHtpZH1gKVxyXG4gICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgICAgLnRoZW4oZmV0Y2hlZFJldmlld3MgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmluZm8oXCJGb3VuZCBSZXZpZXdzIHNhdmluZyB0byBpZGJcIik7XHJcbiAgICAgICAgICAgIGRiUHJvbWlzZS5wdXRSZXZpZXdzKGZldGNoZWRSZXZpZXdzKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmZXRjaGVkUmV2aWV3cztcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlJldmlld3MgY291bGRuJ3QgYmUgZmV0Y2hlZCBmcm9tIG5ldHdvcmssIHNvcnJ5LlwiKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIkZvdW5kIHJldmlld3Mgb24gaWRiXCIpO1xyXG5cclxuICAgICAgICByZXR1cm4gaWRiUmV2aWV3cztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJIGhhdmUgYW4gaWRiIGNvbGxlY3Rpb24gb2Ygb2ZmbGluZSBtZXNzYWdlcyB0aGF0IG5lZWQgdG8gZ2V0IG9ubGluZVxyXG4gICAqL1xyXG4gIHN0YXRpYyBzeW5jT2ZmbGluZVJldmlld3MoKSB7XHJcbiAgICByZXR1cm4gZGJQcm9taXNlLmdldE9mZmxpbmVSZXZpZXdzKCkudGhlbihyZXZpZXdzID0+IHtcclxuICAgICAgLy8gSWYgd2UgYWN0dWFsbHkgZ290IHNvbWUgcmV2aWV3cywgc2VuZCB0aGVtIHRvIGlkYiwgbm90IHN1cmUgaWYgSSBzZW5kIHdob2xlIG9iamVjdFxyXG4gICAgICBpZiAocmV2aWV3cykge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAke0RCSGVscGVyLkFQSV9VUkx9L3Jldmlld3MvYDtcclxuICAgICAgICBjb25zdCBQT1NUID0ge1xyXG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJldmlld3MpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCwgUE9TVCkudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIldlIGNvdWxkbid0IHBvc3QgcmV2aWV3IHRvIHNlcnZlci5cIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zb2xlLmluZm8oXCJQb3N0ZWQgb2ZmbGluZSByZXZpZXdzIHRvIGFwaSBzdWNjZXNzZnVsbHlcIik7XHJcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAqIEkgaGF2ZSBhbiBpZGIgY29sbGVjdGlvbiBvZiBvZmZsaW5lIG1lc3NhZ2VzIHRoYXQgbmVlZCB0byBnZXQgb25saW5lXHJcbiAgICovXHJcbiAgc3RhdGljIHN5bmNPZmZsaW5lZmF2KCkge1xyXG4gICAgcmV0dXJuIGRiUHJvbWlzZS5nZXRPZmZsaW5lZmF2cygpLnRoZW4oZmF2cyA9PiB7XHJcbiAgICAgIC8vIElmIHdlIGFjdHVhbGx5IGdvdCBzb21lIGZhdnMsIHNlbmQgdGhlbSB0byBpZGJcclxuICAgICAgaWYgKGZhdnMpIHtcclxuICAgICAgICBjb25zdCB1cmwgPSBgJHtEQkhlbHBlci5BUElfVVJMfS9yZXN0YXVyYW50cy8ke3Jlc3RhdXJhbnRJZH0vP2lzX2Zhdm9yaXRlPSR7IWZhdn1gO1xyXG4gICAgICAgIGNvbnN0IFBVVCA9IHtcclxuICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gZmV0Y2godXJsLCBQVVQpLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJXZSBjb3VsZG4ndCBwb3N0IGZhdiB0byBzZXJ2ZXIuXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc29sZS5pbmZvKFwiUG9zdGVkIG9mZmxpbmUgZmF2cyB0byBhcGkgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBjdWlzaW5lIHR5cGUgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZShjdWlzaW5lLCBjYWxsYmFjaykge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzICB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZ1xyXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBGaWx0ZXIgcmVzdGF1cmFudHMgdG8gaGF2ZSBvbmx5IGdpdmVuIGN1aXNpbmUgdHlwZVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSByZXN0YXVyYW50cy5maWx0ZXIociA9PiByLmN1aXNpbmVfdHlwZSA9PSBjdWlzaW5lKTtcclxuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHRzKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCByZXN0YXVyYW50cyBieSBhIG5laWdoYm9yaG9vZCB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cclxuICAgKi9cclxuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlOZWlnaGJvcmhvb2QobmVpZ2hib3Job29kLCBjYWxsYmFjaykge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXHJcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEZpbHRlciByZXN0YXVyYW50cyB0byBoYXZlIG9ubHkgZ2l2ZW4gbmVpZ2hib3Job29kXHJcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHJlc3RhdXJhbnRzLmZpbHRlcihyID0+IHIubmVpZ2hib3Job29kID09IG5laWdoYm9yaG9vZCk7XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBjdWlzaW5lIGFuZCBhIG5laWdoYm9yaG9vZCB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cclxuICAgKi9cclxuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kKFxyXG4gICAgY3Vpc2luZSxcclxuICAgIG5laWdoYm9yaG9vZCxcclxuICAgIGNhbGxiYWNrXHJcbiAgKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdHMgPSByZXN0YXVyYW50cztcclxuICAgICAgICBpZiAoY3Vpc2luZSAhPSBcImFsbFwiKSB7XHJcbiAgICAgICAgICAvLyBmaWx0ZXIgYnkgY3Vpc2luZVxyXG4gICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5jdWlzaW5lX3R5cGUgPT0gY3Vpc2luZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuZWlnaGJvcmhvb2QgIT0gXCJhbGxcIikge1xyXG4gICAgICAgICAgLy8gZmlsdGVyIGJ5IG5laWdoYm9yaG9vZFxyXG4gICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5uZWlnaGJvcmhvb2QgPT0gbmVpZ2hib3Job29kKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggYWxsIG5laWdoYm9yaG9vZHMgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoTmVpZ2hib3Job29kcyhjYWxsYmFjaykge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXHJcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEdldCBhbGwgbmVpZ2hib3Job29kcyBmcm9tIGFsbCByZXN0YXVyYW50c1xyXG4gICAgICAgIGNvbnN0IG5laWdoYm9yaG9vZHMgPSByZXN0YXVyYW50cy5tYXAoXHJcbiAgICAgICAgICAodiwgaSkgPT4gcmVzdGF1cmFudHNbaV0ubmVpZ2hib3Job29kXHJcbiAgICAgICAgKTtcclxuICAgICAgICAvLyBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIG5laWdoYm9yaG9vZHNcclxuICAgICAgICBjb25zdCB1bmlxdWVOZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcy5maWx0ZXIoXHJcbiAgICAgICAgICAodiwgaSkgPT4gbmVpZ2hib3Job29kcy5pbmRleE9mKHYpID09IGlcclxuICAgICAgICApO1xyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHVuaXF1ZU5laWdoYm9yaG9vZHMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIGFsbCBjdWlzaW5lcyB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cclxuICAgKi9cclxuICBzdGF0aWMgZmV0Y2hDdWlzaW5lcyhjYWxsYmFjaykge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXHJcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEdldCBhbGwgY3Vpc2luZXMgZnJvbSBhbGwgcmVzdGF1cmFudHNcclxuICAgICAgICBjb25zdCBjdWlzaW5lcyA9IHJlc3RhdXJhbnRzLm1hcCgodiwgaSkgPT4gcmVzdGF1cmFudHNbaV0uY3Vpc2luZV90eXBlKTtcclxuICAgICAgICAvLyBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGN1aXNpbmVzXHJcbiAgICAgICAgY29uc3QgdW5pcXVlQ3Vpc2luZXMgPSBjdWlzaW5lcy5maWx0ZXIoXHJcbiAgICAgICAgICAodiwgaSkgPT4gY3Vpc2luZXMuaW5kZXhPZih2KSA9PSBpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjYWxsYmFjayhudWxsLCB1bmlxdWVDdWlzaW5lcyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzdGF1cmFudCBwYWdlIFVSTC5cclxuICAgKi9cclxuICBzdGF0aWMgdXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XHJcbiAgICByZXR1cm4gYC4vcmVzdGF1cmFudC5odG1sP2lkPSR7cmVzdGF1cmFudC5pZH1gO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzdGF1cmFudCBpbWFnZSBVUkwuXHJcbiAgICovXHJcbiAgc3RhdGljIGltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XHJcbiAgICBjb25zdCB1cmwgPSBgLi9pbWcvJHtyZXN0YXVyYW50LnBob3RvZ3JhcGggfHwgcmVzdGF1cmFudC5pZH0tbWVkaXVtLmpwZ2A7XHJcblxyXG4gICAgcmV0dXJuIHVybDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc3RhdXJhbnQgc3Jjc2V0IGF0dHJpYnV0ZSBmb3IgYnJvd3NlciB0byBkZWNpZGUgYmVzdCByZXNvbHV0aW9uLiBJdCB1c2VzIHJlc3RhdXJhbnQucGhvdG9ncmFwaFxyXG4gICAqIGFuZCBmYWxsYmFja3MgdG8gcmVzdGF1cmFudC5pZCBpZiBmb3JtZXIgaXMgbWlzc2luZy5cclxuICAgKi9cclxuICBzdGF0aWMgaW1hZ2VTcmNzZXRGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpIHtcclxuICAgIGNvbnN0IGltYWdlU3JjID0gYC4vaW1nLyR7cmVzdGF1cmFudC5waG90b2dyYXBoIHx8IHJlc3RhdXJhbnQuaWR9YDtcclxuICAgIHJldHVybiBgJHtpbWFnZVNyY30tc21hbGwuanBnIDMwMHcsXHJcbiAgICAgICAgICAgICR7aW1hZ2VTcmN9LW1lZGl1bS5qcGcgNjAwdyxcclxuICAgICAgICAgICAgJHtpbWFnZVNyY30tbGFyZ2UuanBnIDgwMHdgO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzdGF1cmFudCBzaXplcyBhdHRyaWJ1dGUgc28gYnJvd3NlciBrbm93cyBpbWFnZSBzaXplcyBiZWZvcmUgZGVjaWRpbmdcclxuICAgKiB3aGF0IGltYWdlIHRvIGRvd25sb2FkLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBpbWFnZVNpemVzRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XHJcbiAgICByZXR1cm4gYChtYXgtd2lkdGg6IDM2MHB4KSAyODBweCxcclxuICAgICAgICAgICAgKG1heC13aWR0aDogNjAwcHgpIDYwMHB4LFxyXG4gICAgICAgICAgICA0MDBweGA7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgbWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBtYXApIHtcclxuICAgIGNvbnN0IG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgICBwb3NpdGlvbjogcmVzdGF1cmFudC5sYXRsbmcsXHJcbiAgICAgIHRpdGxlOiByZXN0YXVyYW50Lm5hbWUsXHJcbiAgICAgIHVybDogREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSxcclxuICAgICAgbWFwOiBtYXAsXHJcbiAgICAgIGFuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkRST1BcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG1hcmtlcjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IGlkYiBmcm9tIFwiaWRiXCI7XHJcblxyXG5jb25zdCBkYlByb21pc2UgPSB7XHJcbiAgLy8gY3JlYXRpb24gYW5kIHVwZGF0aW5nIG9mIGRhdGFiYXNlIGhhcHBlbnMgaGVyZS5cclxuICBkYjogaWRiLm9wZW4oXCJyZXN0YXVyYW50LXJldmlld3MtZGJcIiwgMywgZnVuY3Rpb24gKHVwZ3JhZGVEYikge1xyXG4gICAgc3dpdGNoICh1cGdyYWRlRGIub2xkVmVyc2lvbikge1xyXG4gICAgICBjYXNlIDA6XHJcbiAgICAgICAgdXBncmFkZURiLmNyZWF0ZU9iamVjdFN0b3JlKFwicmVzdGF1cmFudHNcIiwgeyBrZXlQYXRoOiBcImlkXCIgfSk7XHJcbiAgICAgIGNhc2UgMTpcclxuICAgICAgICB1cGdyYWRlRGJcclxuICAgICAgICAgIC5jcmVhdGVPYmplY3RTdG9yZShcInJldmlld3NcIiwgeyBrZXlQYXRoOiBcImlkXCIgfSlcclxuICAgICAgICAgIC5jcmVhdGVJbmRleChcInJlc3RhdXJhbnRfaWRcIiwgXCJyZXN0YXVyYW50X2lkXCIpO1xyXG4gICAgICBjYXNlIDI6XHJcbiAgICAgICAgdXBncmFkZURiXHJcbiAgICAgICAgICAuY3JlYXRlT2JqZWN0U3RvcmUoXCJvZmZsaW5lXCIsIHsgYXV0b0luY3JlbWVudDogdHJ1ZSwga2V5UGF0aDogXCJpZFwiIH0pXHJcbiAgICAgICAgICAuY3JlYXRlSW5kZXgoXCJyZXN0YXVyYW50X2lkXCIsIFwicmVzdGF1cmFudF9pZFwiKTtcclxuICAgICAgY2FzZSAzOlxyXG4gICAgICAgIHVwZ3JhZGVEYlxyXG4gICAgICAgICAgLmNyZWF0ZU9iamVjdFN0b3JlKFwib2ZmbGluZS1mYXZcIiwgeyBhdXRvSW5jcmVtZW50OiB0cnVlLCBrZXlQYXRoOiBcImlkXCIgfSlcclxuICAgICAgICAgIC5jcmVhdGVJbmRleChcInJlc3RhdXJhbnRfaWRcIiwgXCJyZXN0YXVyYW50X2lkXCIpO1xyXG4gICAgfVxyXG4gIH0pLFxyXG5cclxuICAvKipcclxuICAgKiBTYXZlIHJlc3RhdXJhbnRcclxuICAgKi9cclxuICBwdXRSZXN0YXVyYW50cyhyZXN0YXVyYW50cywgZm9yY2VVcGRhdGUgPSBmYWxzZSkge1xyXG4gICAgaWYgKCFyZXN0YXVyYW50cy5wdXNoKSByZXN0YXVyYW50cyA9IFtyZXN0YXVyYW50c107XHJcbiAgICByZXR1cm4gdGhpcy5kYi50aGVuKGRiID0+IHtcclxuICAgICAgY29uc3Qgc3RvcmUgPSBkYlxyXG4gICAgICAgIC50cmFuc2FjdGlvbihcInJlc3RhdXJhbnRzXCIsIFwicmVhZHdyaXRlXCIpXHJcbiAgICAgICAgLm9iamVjdFN0b3JlKFwicmVzdGF1cmFudHNcIik7XHJcbiAgICAgIFByb21pc2UuYWxsKFxyXG4gICAgICAgIHJlc3RhdXJhbnRzLm1hcChhcGlSZXN0YXVyYW50ID0+IHtcclxuICAgICAgICAgIHJldHVybiBzdG9yZS5nZXQoYXBpUmVzdGF1cmFudC5pZCkudGhlbihpZGJSZXN0YXVyYW50ID0+IHtcclxuICAgICAgICAgICAgaWYgKGZvcmNlVXBkYXRlKSByZXR1cm4gc3RvcmUucHV0KGFwaVJlc3RhdXJhbnQpO1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgIWlkYlJlc3RhdXJhbnQgfHxcclxuICAgICAgICAgICAgICBuZXcgRGF0ZShhcGlSZXN0YXVyYW50LnVwZGF0ZWRBdCkgPlxyXG4gICAgICAgICAgICAgIG5ldyBEYXRlKGlkYlJlc3RhdXJhbnQudXBkYXRlZEF0KVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICByZXR1cm4gc3RvcmUucHV0KGFwaVJlc3RhdXJhbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICApLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBzdG9yZS5jb21wbGV0ZTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICBwdXRGYXZvcml0ZShpZCwgYm9vbGVhbikge1xyXG4gICAgcmV0dXJuIHRoaXMuZGJcclxuICAgICAgLnRoZW4oKGRiKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc3RvcmUgPSBkYlxyXG4gICAgICAgICAgLnRyYW5zYWN0aW9uKFwicmVzdGF1cmFudHNcIiwgXCJyZWFkd3JpdGVcIilcclxuICAgICAgICAgIC5vYmplY3RTdG9yZShcInJlc3RhdXJhbnRzXCIpO1xyXG5cclxuICAgICAgICBzdG9yZS5nZXQoaWQpXHJcbiAgICAgICAgICAudGhlbigoaWRiUmVzdGF1cmFudCkgPT4ge1xyXG4gICAgICAgICAgICBpZGJSZXN0YXVyYW50LmlzX2Zhdm9yaXRlID0gYm9vbGVhbi50b1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgc3RvcmUucHV0KGlkYlJlc3RhdXJhbnQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmNvbXBsZXRlO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5pbmZvKCdVcGRhdGVkIGZhdiBpbiBpZGInKTtcclxuICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGZhdiBpbiBpZGInLCBlcnIpO1xyXG4gICAgICB9KVxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCByZXN0YXVyYW50XHJcbiAgICovXHJcbiAgZ2V0UmVzdGF1cmFudHMoaWQgPSB1bmRlZmluZWQpIHtcclxuICAgIHJldHVybiB0aGlzLmRiLnRoZW4oZGIgPT4ge1xyXG4gICAgICBjb25zdCBzdG9yZSA9IGRiLnRyYW5zYWN0aW9uKFwicmVzdGF1cmFudHNcIikub2JqZWN0U3RvcmUoXCJyZXN0YXVyYW50c1wiKTtcclxuICAgICAgaWYgKGlkKSByZXR1cm4gc3RvcmUuZ2V0KE51bWJlcihpZCkpO1xyXG4gICAgICByZXR1cm4gc3RvcmUuZ2V0QWxsKCk7XHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBTYXZlIHJldmlld3NcclxuICAgKi9cclxuICBwdXRSZXZpZXdzKHJldmlld3MpIHtcclxuICAgIGlmICghcmV2aWV3cy5wdXNoKSByZXZpZXdzID0gW3Jldmlld3NdO1xyXG4gICAgcmV0dXJuIHRoaXMuZGIudGhlbihkYiA9PiB7XHJcbiAgICAgIGNvbnN0IHN0b3JlID0gZGJcclxuICAgICAgICAudHJhbnNhY3Rpb24oXCJyZXZpZXdzXCIsIFwicmVhZHdyaXRlXCIpXHJcbiAgICAgICAgLm9iamVjdFN0b3JlKFwicmV2aWV3c1wiKTtcclxuICAgICAgUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgcmV2aWV3cy5tYXAoYXBpUmV2aWV3ID0+IHtcclxuICAgICAgICAgIHJldHVybiBzdG9yZS5nZXQoYXBpUmV2aWV3LmlkKS50aGVuKGlkYlJldmlldyA9PiB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAhaWRiUmV2aWV3IHx8XHJcbiAgICAgICAgICAgICAgbmV3IERhdGUoYXBpUmV2aWV3LnVwZGF0ZWRBdCkgPiBuZXcgRGF0ZShpZGJSZXZpZXcudXBkYXRlZEF0KVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICByZXR1cm4gc3RvcmUucHV0KGFwaVJldmlldyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlLmNvbXBsZXRlO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIGdldFJldmlld3NGb3JSZXN0YXVyYW50KGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kYi50aGVuKGRiID0+IHtcclxuICAgICAgY29uc3Qgc3RvcmVJbmRleCA9IGRiXHJcbiAgICAgICAgLnRyYW5zYWN0aW9uKFwicmV2aWV3c1wiKVxyXG4gICAgICAgIC5vYmplY3RTdG9yZShcInJldmlld3NcIilcclxuICAgICAgICAuaW5kZXgoXCJyZXN0YXVyYW50X2lkXCIpO1xyXG4gICAgICByZXR1cm4gc3RvcmVJbmRleC5nZXRBbGwoTnVtYmVyKGlkKSk7XHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICAvLyBTdG9yaW5nIG9mZmxpbmUgcmV2aWV3cyB0byBvZmZsaW5lIGlkYiBjb2xsZWN0aW9uXHJcbiAgcHV0T2ZmbGluZVJldmlldyhyZXZpZXcpIHtcclxuICAgIHJldHVybiB0aGlzLmRiXHJcbiAgICAgIC50aGVuKGRiID0+IHtcclxuICAgICAgICBjb25zdCBzdG9yZSA9IGRiLnRyYW5zYWN0aW9uKFwib2ZmbGluZVwiLCBcInJlYWR3cml0ZVwiKS5vYmplY3RTdG9yZShcIm9mZmxpbmVcIik7XHJcbiAgICAgICAgc3RvcmUucHV0KHJldmlldyk7XHJcblxyXG4gICAgICAgIHJldHVybiBzdG9yZS5jb21wbGV0ZTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnU2F2ZWQgYSByZXZpZXcgdG8gaWRiIHdoaWxlIG9mZmxpbmUnKTtcclxuICAgICAgICAvLyBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeS50aGVuKHJlZ2lzdHJhdGlvbiA9PiB7XHJcbiAgICAgICAgLy8gICByZXR1cm4gcmVnaXN0cmF0aW9uLnN5bmMucmVnaXN0ZXIoXCJmbHVzaFwiKTtcclxuICAgICAgICAvLyB9KTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgLy8gR2V0dGluZyB3aGF0ZXZlciBJIGhhdmUgaW4gdGhlIG9mZmxpbmUgaWRiIGNvbGxlY3Rpb25cclxuICBnZXRPZmZsaW5lUmV2aWV3cygpIHtcclxuICAgIHJldHVybiB0aGlzLmRiXHJcbiAgICAgIC50aGVuKGRiID0+IHtcclxuICAgICAgICBjb25zdCBzdG9yZSA9IGRiLnRyYW5zYWN0aW9uKFwib2ZmbGluZVwiLCBcInJlYWRvbmx5XCIpLm9iamVjdFN0b3JlKFwib2ZmbGluZVwiKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHN0b3JlLmdldEFsbCgpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5pbmZvKCdSZXRyaWV2ZWQgb2ZmbGluZSByZXZpZXdzJyk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIC8vIENsZWFyaW5nIHdoYXRldmVyIEkgaGF2ZSBpbiB0aGUgb2ZmbGluZSBpZGIgY29sbGVjdGlvblxyXG4gIGNsZWFyT2ZmbGluZVJldmlld3MoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kYlxyXG4gICAgICAudGhlbihkYiA9PiB7XHJcbiAgICAgICAgY29uc3Qgc3RvcmUgPSBkYi50cmFuc2FjdGlvbihcIm9mZmxpbmVcIiwgXCJyZWFkd3JpdGVcIikub2JqZWN0U3RvcmUoXCJvZmZsaW5lXCIpO1xyXG4gICAgICAgIHN0b3JlLmNsZWFyKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBzdG9yZTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUud2FybmluZygnRGVsZXRlZCBvZmZsaW5lIHJldmlld3MnLCByZXMpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG5cclxuICAvLyBTdG9yaW5nIG9mZmxpbmUgZmF2cyB0byBvZmZsaW5lIGlkYiBjb2xsZWN0aW9uXHJcbiAgcHV0T2ZmbGluZWZhdihmYXYpIHtcclxuICAgIHJldHVybiB0aGlzLmRiXHJcbiAgICAgIC50aGVuKGRiID0+IHtcclxuICAgICAgICBjb25zdCBzdG9yZSA9IGRiLnRyYW5zYWN0aW9uKFwib2ZmbGluZS1mYXZcIiwgXCJyZWFkd3JpdGVcIikub2JqZWN0U3RvcmUoXCJvZmZsaW5lLWZhdlwiKTtcclxuICAgICAgICBzdG9yZS5wdXQoZmF2KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHN0b3JlLmNvbXBsZXRlO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5pbmZvKCdTYXZlZCBhIGZhdiB0byBpZGIgd2hpbGUgb2ZmbGluZScpO1xyXG4gICAgICAgIC8vIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5LnRoZW4ocmVnaXN0cmF0aW9uID0+IHtcclxuICAgICAgICAvLyAgIHJldHVybiByZWdpc3RyYXRpb24uc3luYy5yZWdpc3RlcihcImZsdXNoXCIpO1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG5cclxuICAvLyBHZXR0aW5nIHdoYXRldmVyIEkgaGF2ZSBpbiB0aGUgb2ZmbGluZSBpZGIgY29sbGVjdGlvblxyXG4gIGdldE9mZmxpbmVmYXZzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGJcclxuICAgICAgLnRoZW4oZGIgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN0b3JlID0gZGIudHJhbnNhY3Rpb24oXCJvZmZsaW5lLWZhdlwiLCBcInJlYWRvbmx5XCIpLm9iamVjdFN0b3JlKFwib2ZmbGluZS1mYXZcIik7XHJcblxyXG4gICAgICAgIHJldHVybiBzdG9yZS5nZXRBbGwoKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnUmV0cmlldmVkIG9mZmxpbmUgZmF2cycpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG5cclxuICAvLyBDbGVhcmluZyB3aGF0ZXZlciBJIGhhdmUgaW4gdGhlIG9mZmxpbmUgaWRiIGNvbGxlY3Rpb25cclxuICBjbGVhck9mZmxpbmVmYXZzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGJcclxuICAgICAgLnRoZW4oZGIgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN0b3JlID0gZGIudHJhbnNhY3Rpb24oXCJvZmZsaW5lLWZhdlwiLCBcInJlYWR3cml0ZVwiKS5vYmplY3RTdG9yZShcIm9mZmxpbmUtZmF2XCIpO1xyXG4gICAgICAgIHN0b3JlLmNsZWFyKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBzdG9yZTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUud2FybmluZygnRGVsZXRlZCBvZmZsaW5lIGZhdnMnLCByZXMpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG5cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGRiUHJvbWlzZTtcclxuIiwiaW1wb3J0IERCSGVscGVyIGZyb20gXCIuL2RiaGVscGVyXCI7XG5pbXBvcnQgZGJQcm9taXNlIGZyb20gXCIuL2RicHJvbWlzZVwiO1xuXG5mdW5jdGlvbiBoYW5kbGVDbGljayhlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCByZXN0YXVyYW50SWQgPSB0aGlzLmRhdGFzZXQuaWQ7XG4gIGNvbnN0IGZhdiA9IHRoaXMuZ2V0QXR0cmlidXRlKCdhcmlhLXByZXNzZWQnKSA9PSAndHJ1ZSc7XG4gIGNvbnN0IHVybCA9IGAke0RCSGVscGVyLkFQSV9VUkx9L3Jlc3RhdXJhbnRzLyR7cmVzdGF1cmFudElkfS8/aXNfZmF2b3JpdGU9JHshZmF2fWA7XG4gIGNvbnN0IFBVVCA9IHsgbWV0aG9kOiAnUFVUJyB9O1xuXG4gIC8vIElmIHdlIGFyZSBvZmZsaW5lXG4gIGlmICghbmF2aWdhdG9yLm9uTGluZSkge1xuICAgIGNvbnNvbGUuaW5mbygnQXBwIHdhcyBvZmZsaW5lLCB3aGVuIHlvdSB0cmllZCB0byBzZW5kIGZhdicpO1xuICAgIGRiUHJvbWlzZS5wdXRPZmZsaW5lZmF2KCFmYXYpO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLXByZXNzZWQnLCAhZmF2KTtcblxuICB9IGVsc2Uge1xuICAgIC8vIElmIHdlIGFyZSBvbmxpbmVcbiAgICByZXR1cm4gZmV0Y2godXJsLCBQVVQpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9KS50aGVuKHVwZGF0ZWRSZXN0YXVyYW50ID0+IHtcbiAgICAgIC8vIHVwZGF0ZSByZXN0YXVyYW50IG9uIGlkYlxuICAgICAgZGJQcm9taXNlLnB1dFJlc3RhdXJhbnRzKHVwZGF0ZWRSZXN0YXVyYW50LCB0cnVlKTtcbiAgICAgIC8vIGNoYW5nZSBzdGF0ZSBvZiB0b2dnbGUgYnV0dG9uXG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnYXJpYS1wcmVzc2VkJywgIWZhdik7XG4gICAgICByZXR1cm4gdXBkYXRlZFJlc3RhdXJhbnQ7XG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignQ291bGRudCB1cGRhdGUgZmF2IGluIEFQSScsIGVycik7XG4gICAgfSk7XG4gIH1cblxufVxuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZmF2b3JpdGVCdXR0b24ocmVzdGF1cmFudCkge1xuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgYnV0dG9uLmlubmVySFRNTCA9IFwiJiN4Mjc2NDtcIjtcbiAgYnV0dG9uLmNsYXNzTmFtZSA9IFwiZmF2LXJlc3RhdXJhbnRcIjtcbiAgYnV0dG9uLmRhdGFzZXQuaWQgPSByZXN0YXVyYW50LmlkO1xuICBidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYFNhdmUgJHtyZXN0YXVyYW50Lm5hbWV9IGFzIGEgZmF2b3JpdGVgKTtcbiAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1wcmVzc2VkJywgcmVzdGF1cmFudC5pc19mYXZvcml0ZSk7XG4gIGJ1dHRvbi5vbmNsaWNrID0gaGFuZGxlQ2xpY2s7XG5cbiAgcmV0dXJuIGJ1dHRvbjtcbn1cbiIsImltcG9ydCBEQkhlbHBlciBmcm9tIFwiLi9kYmhlbHBlclwiO1xuaW1wb3J0IGRiUHJvbWlzZSBmcm9tIFwiLi9kYnByb21pc2VcIjtcblxuZnVuY3Rpb24gaGFuZGxlQ2xpY2soZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3QgcmVzdGF1cmFudElkID0gdGhpcy5kYXRhc2V0LmlkO1xuICBjb25zdCBmYXYgPSB0aGlzLmdldEF0dHJpYnV0ZSgnYXJpYS1wcmVzc2VkJykgPT0gJ3RydWUnO1xuICBjb25zdCB1cmwgPSBgJHtEQkhlbHBlci5BUElfVVJMfS9yZXN0YXVyYW50cy8ke3Jlc3RhdXJhbnRJZH0vP2lzX2Zhdm9yaXRlPSR7IWZhdn1gO1xuICBjb25zdCBQVVQgPSB7IG1ldGhvZDogJ1BVVCcgfTtcblxuICAvLyBJZiB3ZSBhcmUgb2ZmbGluZVxuICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcbiAgICBjb25zb2xlLmluZm8oJ0FwcCB3YXMgb2ZmbGluZSwgd2hlbiB5b3UgdHJpZWQgdG8gc2VuZCBmYXYnKTtcbiAgICBkYlByb21pc2UucHV0T2ZmbGluZWZhdighZmF2KTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZSgnYXJpYS1wcmVzc2VkJywgIWZhdik7XG5cbiAgfSBlbHNlIHtcbiAgICAvLyBJZiB3ZSBhcmUgb25saW5lXG4gICAgcmV0dXJuIGZldGNoKHVybCwgUFVUKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSkudGhlbih1cGRhdGVkUmVzdGF1cmFudCA9PiB7XG4gICAgICAvLyB1cGRhdGUgcmVzdGF1cmFudCBvbiBpZGJcbiAgICAgIGRiUHJvbWlzZS5wdXRSZXN0YXVyYW50cyh1cGRhdGVkUmVzdGF1cmFudCwgdHJ1ZSk7XG4gICAgICAvLyBjaGFuZ2Ugc3RhdGUgb2YgdG9nZ2xlIGJ1dHRvblxuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtcHJlc3NlZCcsICFmYXYpO1xuICAgICAgcmV0dXJuIHVwZGF0ZWRSZXN0YXVyYW50O1xuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvdWxkbnQgdXBkYXRlIGZhdiBpbiBBUEknLCBlcnIpO1xuICAgIH0pO1xuICB9XG5cbn1cblxuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGZhdm9yaXRlQnV0dG9uKHJlc3RhdXJhbnQpIHtcbiAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGJ1dHRvbi5pbm5lckhUTUwgPSBcIiYjeDI3NjQ7XCI7XG4gIGJ1dHRvbi5jbGFzc05hbWUgPSBcImZhdi1yZXN0YXVyYW50XCI7XG4gIGJ1dHRvbi5kYXRhc2V0LmlkID0gcmVzdGF1cmFudC5pZDtcbiAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGBTYXZlICR7cmVzdGF1cmFudC5uYW1lfSBhcyBhIGZhdm9yaXRlYCk7XG4gIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtcHJlc3NlZCcsIHJlc3RhdXJhbnQuaXNfZmF2b3JpdGUpO1xuICBidXR0b24ub25jbGljayA9IGhhbmRsZUNsaWNrO1xuXG4gIHJldHVybiBidXR0b247XG59XG4iLCIvKiEgbG96YWQuanMgLSB2MS43LjAgLSAyMDE4LTExLTA4XHJcbiogaHR0cHM6Ly9naXRodWIuY29tL0Fwb29ydlNheGVuYS9sb3phZC5qc1xyXG4qIENvcHlyaWdodCAoYykgMjAxOCBBcG9vcnYgU2F4ZW5hOyBMaWNlbnNlZCBNSVQgKi9cclxuIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6dC5sb3phZD1lKCl9KHRoaXMsKCkgPT4ge1widXNlIHN0cmljdFwiO3ZhciBnPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciByPWFyZ3VtZW50c1tlXTtmb3IodmFyIG8gaW4gcilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixvKSYmKHRbb109cltvXSl9cmV0dXJuIHR9LHI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50JiZkb2N1bWVudC5kb2N1bWVudE1vZGUsbD17cm9vdE1hcmdpbjpcIjBweFwiLHRocmVzaG9sZDowLGxvYWQ6ZnVuY3Rpb24odCl7aWYoXCJwaWN0dXJlXCI9PT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7ciYmdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWllc3JjXCIpJiYoZS5zcmM9dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWllc3JjXCIpKSx0LmdldEF0dHJpYnV0ZShcImRhdGEtYWx0XCIpJiYoZS5hbHQ9dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWFsdFwiKSksdC5hcHBlbmRDaGlsZChlKX10LmdldEF0dHJpYnV0ZShcImRhdGEtc3JjXCIpJiYodC5zcmM9dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNyY1wiKSksdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNyY3NldFwiKSYmdC5zZXRBdHRyaWJ1dGUoXCJzcmNzZXRcIix0LmdldEF0dHJpYnV0ZShcImRhdGEtc3Jjc2V0XCIpKSx0LmdldEF0dHJpYnV0ZShcImRhdGEtYmFja2dyb3VuZC1pbWFnZVwiKSYmKHQuc3R5bGUuYmFja2dyb3VuZEltYWdlPVwidXJsKCdcIit0LmdldEF0dHJpYnV0ZShcImRhdGEtYmFja2dyb3VuZC1pbWFnZVwiKStcIicpXCIpLHQuZ2V0QXR0cmlidXRlKFwiZGF0YS10b2dnbGUtY2xhc3NcIikmJnQuY2xhc3NMaXN0LnRvZ2dsZSh0LmdldEF0dHJpYnV0ZShcImRhdGEtdG9nZ2xlLWNsYXNzXCIpKX0sbG9hZGVkOmZ1bmN0aW9uKCl7fX07XHJcbi8qKlxyXG4gICAqIERldGVjdCBJRSBicm93c2VyXHJcbiAgICogQGNvbnN0IHtib29sZWFufVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovZnVuY3Rpb24gZih0KXt0LnNldEF0dHJpYnV0ZShcImRhdGEtbG9hZGVkXCIsITApfXZhciBiPWZ1bmN0aW9uKHQpe3JldHVyblwidHJ1ZVwiPT09dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWxvYWRlZFwiKX07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHIsbyxhPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcIi5sb3phZFwiLHQ9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGU9Zyh7fSxsLHQpLG49ZS5yb290LGk9ZS5yb290TWFyZ2luLGQ9ZS50aHJlc2hvbGQsdT1lLmxvYWQsYz1lLmxvYWRlZCxzPXZvaWQgMDtyZXR1cm4gd2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyJiYocz1uZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKHI9dSxvPWMsZnVuY3Rpb24odCxlKXt0LmZvckVhY2goZnVuY3Rpb24odCl7KDA8dC5pbnRlcnNlY3Rpb25SYXRpb3x8dC5pc0ludGVyc2VjdGluZykmJihlLnVub2JzZXJ2ZSh0LnRhcmdldCksYih0LnRhcmdldCl8fChyKHQudGFyZ2V0KSxmKHQudGFyZ2V0KSxvKHQudGFyZ2V0KSkpfSl9KSx7cm9vdDpuLHJvb3RNYXJnaW46aSx0aHJlc2hvbGQ6ZH0pKSx7b2JzZXJ2ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1mdW5jdGlvbih0KXt2YXIgZT0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06ZG9jdW1lbnQ7cmV0dXJuIHQgaW5zdGFuY2VvZiBFbGVtZW50P1t0XTp0IGluc3RhbmNlb2YgTm9kZUxpc3Q/dDplLnF1ZXJ5U2VsZWN0b3JBbGwodCl9KGEsbiksZT0wO2U8dC5sZW5ndGg7ZSsrKWIodFtlXSl8fChzP3Mub2JzZXJ2ZSh0W2VdKToodSh0W2VdKSxmKHRbZV0pLGModFtlXSkpKX0sdHJpZ2dlckxvYWQ6ZnVuY3Rpb24odCl7Yih0KXx8KHUodCksZih0KSxjKHQpKX0sb2JzZXJ2ZXI6c319fSk7XHJcbiIsIlwidXNlLXN0cmljdFwiO1xyXG5cclxuaW1wb3J0IERCSGVscGVyIGZyb20gXCIuL2RiaGVscGVyXCI7XHJcbmltcG9ydCBcIi4vcmVnaXN0ZXJcIjtcclxuaW1wb3J0IFwiLi9icm93c2VyXCI7XHJcbmltcG9ydCBcIi4vZmF2b3JpdGVidXR0b25cIjtcclxuaW1wb3J0IGZhdm9yaXRlQnV0dG9uIGZyb20gXCIuL2Zhdm9yaXRlQnV0dG9uXCI7XHJcbmltcG9ydCBcIi4vbG96YWRcIjtcclxuXHJcbmxldCByZXN0YXVyYW50cywgbmVpZ2hib3Job29kcywgY3Vpc2luZXM7XHJcbnZhciBuZXdNYXA7XHJcbnZhciBtYXJrZXJzID0gW107XHJcblxyXG4vKipcclxuICogRmV0Y2ggbmVpZ2hib3Job29kcyBhbmQgY3Vpc2luZXMgYXMgc29vbiBhcyB0aGUgcGFnZSBpcyBsb2FkZWQuXHJcbiAqL1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBldmVudCA9PiB7XHJcbiAgZmV0Y2hOZWlnaGJvcmhvb2RzKCk7XHJcbiAgZmV0Y2hDdWlzaW5lcygpO1xyXG4gIGNvbnN0IG9ic2VydmVyID0gbG96YWQoKTsgLy8gbGF6eSBsb2FkcyBlbGVtZW50cyB3aXRoIGRlZmF1bHQgc2VsZWN0b3IgYXMgJy5sb3phZCdcclxuICBvYnNlcnZlci5vYnNlcnZlKCk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEZldGNoIGFsbCBuZWlnaGJvcmhvb2RzIGFuZCBzZXQgdGhlaXIgSFRNTC5cclxuICovXHJcbmNvbnN0IGZldGNoTmVpZ2hib3Job29kcyA9ICgpID0+IHtcclxuICBEQkhlbHBlci5mZXRjaE5laWdoYm9yaG9vZHMoKGVycm9yLCBuZWlnaGJvcmhvb2RzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgLy8gR290IGFuIGVycm9yXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2VsZi5uZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcztcclxuICAgICAgZmlsbE5laWdoYm9yaG9vZHNIVE1MKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0IG5laWdoYm9yaG9vZHMgSFRNTC5cclxuICovXHJcbmNvbnN0IGZpbGxOZWlnaGJvcmhvb2RzSFRNTCA9IChuZWlnaGJvcmhvb2RzID0gc2VsZi5uZWlnaGJvcmhvb2RzKSA9PiB7XHJcbiAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZWlnaGJvcmhvb2RzLXNlbGVjdFwiKTtcclxuICBuZWlnaGJvcmhvb2RzLmZvckVhY2gobmVpZ2hib3Job29kID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gbmVpZ2hib3Job29kO1xyXG4gICAgb3B0aW9uLnZhbHVlID0gbmVpZ2hib3Job29kO1xyXG4gICAgLy8gQXJpYSByb2xlIG5lZWRzIHRvIGJlIGR5bmFtaWNhbGx5IGFkZGVkIHRvb1xyXG4gICAgb3B0aW9uLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJvcHRpb25cIik7XHJcbiAgICBzZWxlY3QuYXBwZW5kKG9wdGlvbik7XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIGN1aXNpbmVzIGFuZCBzZXQgdGhlaXIgSFRNTC5cclxuICovXHJcbmNvbnN0IGZldGNoQ3Vpc2luZXMgPSAoKSA9PiB7XHJcbiAgREJIZWxwZXIuZmV0Y2hDdWlzaW5lcygoZXJyb3IsIGN1aXNpbmVzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYuY3Vpc2luZXMgPSBjdWlzaW5lcztcclxuICAgICAgZmlsbEN1aXNpbmVzSFRNTCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNldCBjdWlzaW5lcyBIVE1MLlxyXG4gKi9cclxuY29uc3QgZmlsbEN1aXNpbmVzSFRNTCA9IChjdWlzaW5lcyA9IHNlbGYuY3Vpc2luZXMpID0+IHtcclxuICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImN1aXNpbmVzLXNlbGVjdFwiKTtcclxuXHJcbiAgY3Vpc2luZXMuZm9yRWFjaChjdWlzaW5lID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gY3Vpc2luZTtcclxuICAgIG9wdGlvbi52YWx1ZSA9IGN1aXNpbmU7XHJcbiAgICAvLyBBcmlhIHJvbGUgbmVlZHMgdG8gYmUgZHluYW1pY2FsbHkgYWRkZWQgdG9vXHJcbiAgICBvcHRpb24uc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcIm9wdGlvblwiKTtcclxuICAgIHNlbGVjdC5hcHBlbmQob3B0aW9uKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgcGFnZSBhbmQgbWFwIGZvciBjdXJyZW50IHJlc3RhdXJhbnRzLlxyXG4gKi9cclxud2luZG93LnVwZGF0ZVJlc3RhdXJhbnRzID0gKCkgPT4ge1xyXG4gIGNvbnN0IGNTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImN1aXNpbmVzLXNlbGVjdFwiKTtcclxuICBjb25zdCBuU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZWlnaGJvcmhvb2RzLXNlbGVjdFwiKTtcclxuXHJcbiAgY29uc3QgY0luZGV4ID0gY1NlbGVjdC5zZWxlY3RlZEluZGV4O1xyXG4gIGNvbnN0IG5JbmRleCA9IG5TZWxlY3Quc2VsZWN0ZWRJbmRleDtcclxuXHJcbiAgY29uc3QgY3Vpc2luZSA9IGNTZWxlY3RbY0luZGV4XS52YWx1ZTtcclxuICBjb25zdCBuZWlnaGJvcmhvb2QgPSBuU2VsZWN0W25JbmRleF0udmFsdWU7XHJcblxyXG4gIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChcclxuICAgIGN1aXNpbmUsXHJcbiAgICBuZWlnaGJvcmhvb2QsXHJcbiAgICAoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXNldFJlc3RhdXJhbnRzKHJlc3RhdXJhbnRzKTtcclxuICAgICAgICBmaWxsUmVzdGF1cmFudHNIVE1MKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICApO1xyXG59O1xyXG5jb25zdCB0b2dnbGVDbGFzcyA9IGUgPT4ge1xyXG4gIGNvbnN0IHN0YXRpY01hcEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtaW1nXCIpO1xyXG4gIGNvbnN0IG1hcEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBcIik7XHJcblxyXG4gIGlmIChtYXBFbC5jbGFzc05hbWUgPT09IFwiaGlkZGVuXCIpIHtcclxuICAgIG1hcEVsLmNsYXNzTmFtZSA9IFwiXCI7XHJcbiAgICBzdGF0aWNNYXBFbC5jbGFzc05hbWUgPSBcImhpZGRlblwiO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBtYXBFbC5jbGFzc05hbWUgPSBcImhpZGRlblwiO1xyXG4gICAgLy8gc3RhdGljTWFwRWwuc3JjPWdldFN0YXRpY01hcFVybCgpO1xyXG4gICAgc3RhdGljTWFwRWwuY2xhc3NOYW1lID0gXCJcIjtcclxuICB9XHJcbn07XHJcbmNvbnN0IGdldFN0YXRpY01hcFVybCA9IG1hcmsgPT4ge1xyXG4gIGNvbnN0IGJhc2VVcmwgPSBcImh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9zdGF0aWNtYXA/XCI7XHJcbiAgY29uc3Qga2V5ID0gXCJBSXphU3lBNElTaWh2dFhOc3dhOTJ0Y0JfcHUzMERkQjdsSG4zYzRcIjtcclxuICBjb25zdCBmb3JtYXQgPSBcImpwZyZcIjtcclxuICBjb25zdCBzdGF0aWNNYXJrZXJzID0gYCBtYXJrZXJzPWNvbG9yOnJlZHw0MC43MTM4MjksLTczLjk4OTY2NyZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzPWNvbG9yOnJlZHw0MC43NDcxNDMsLTczLjk4NTQxNCZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzPWNvbG9yOnJlZHw0MC42ODM1NTUsLTczLjk2NjM5MyZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzPWNvbG9yOnJlZHw0MC43MjIyMTYsLTczLjk4NzUwMSZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzPWNvbG9yOnJlZHw0MC43MDUwODksLTczLjkzMzU4NSZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzPWNvbG9yOnJlZHw0MC42NzQ5MjUsLTc0LjAxNjE2MiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzPWNvbG9yOnJlZHw0MC43MjczOTcsLTczLjk4MzY0NSZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzPWNvbG9yOnJlZHw0MC43MjY1ODQsLTc0LjAwMjA4MiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzPWNvbG9yOnJlZHw0MC43NDM3OTcsLTczLjk1MDY1MiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzPWNvbG9yOnJlZHw0MC43NDMzOTQsLTczLjk1NDIzNSZgO1xyXG4gIGNvbnN0IHdpZHRoID0gOTAwO1xyXG4gIGNvbnN0IGhlaWdodCA9IDQwMDtcclxuICBjb25zdCBjZW50ZXJab29tU2l6ZSA9IGBjZW50ZXI9NDAuNzIyMjE2LC03My45ODc1MDEmem9vbT0xMSZzaXplPSR7d2lkdGh9eCR7aGVpZ2h0fSZmJmA7XHJcblxyXG4gIGNvbnN0IHVybCA9IGJhc2VVcmwgKyBjZW50ZXJab29tU2l6ZSArIGZvcm1hdCArIHN0YXRpY01hcmtlcnMgKyBrZXk7XHJcblxyXG4gIHJldHVybiB1cmw7XHJcbn07XHJcblxyXG53aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcclxuICBsZXQgbG9jID0ge1xyXG4gICAgbGF0OiA0MC43MjIyMTYsXHJcbiAgICBsbmc6IC03My45ODc1MDFcclxuICB9O1xyXG4gIG5ld01hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBcIiksIHtcclxuICAgIHpvb206IDEyLFxyXG4gICAgY2VudGVyOiBsb2MsXHJcbiAgICBzY3JvbGx3aGVlbDogZmFsc2VcclxuICB9KTtcclxuICB1cGRhdGVSZXN0YXVyYW50cygpO1xyXG5cclxuICAvLyBHb29nbGUgbWFwIG1ha2VzIGEgYnVuY2ggb2YgbGlua3MgdGhhdCBzdGVhbCBmb2N1cyBvZiBhIHNjcmVlbiByZWFkZXJcclxuICAvLyBHb2luZyB0byBhZGQgYW4gZXZlbnQgdGhhdCBzZXRzIGF0dHJpYnV0ZSB0byBhbGwgb2YgdGhlc2UgaXRlbXNcclxuICBjb25zdCBtYXBFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwXCIpO1xyXG5cclxuICBtYXBFbC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoKSA9PiB7XHJcbiAgICBjb25zdCBtYXBMaW5rcyA9IG1hcEVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJhXCIpO1xyXG4gICAgbWFwTGlua3MuZm9yRWFjaChsaW5rID0+IGxpbmsuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCItMVwiKSk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ2xlYXIgY3VycmVudCByZXN0YXVyYW50cywgdGhlaXIgSFRNTCBhbmQgcmVtb3ZlIHRoZWlyIG1hcCBtYXJrZXJzLlxyXG4gKi9cclxuY29uc3QgcmVzZXRSZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzID0+IHtcclxuICAvLyBSZW1vdmUgYWxsIHJlc3RhdXJhbnRzXHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IFtdO1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN0YXVyYW50cy1saXN0XCIpO1xyXG4gIHVsLmlubmVySFRNTCA9IFwiXCI7XHJcblxyXG4gIC8vIFJlbW92ZSBhbGwgbWFwIG1hcmtlcnNcclxuICBpZiAobWFya2Vycykge1xyXG4gICAgbWFya2Vycy5mb3JFYWNoKG1hcmtlciA9PiBtYXJrZXIuc2V0TWFwKG51bGwpKTtcclxuICAgIG1hcmtlcnMgPSBbXTtcclxuICB9XHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhbGwgcmVzdGF1cmFudHMgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXHJcbiAqL1xyXG5jb25zdCBmaWxsUmVzdGF1cmFudHNIVE1MID0gKHJlc3RhdXJhbnRzID0gc2VsZi5yZXN0YXVyYW50cykgPT4ge1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN0YXVyYW50cy1saXN0XCIpO1xyXG4gIHJlc3RhdXJhbnRzLmZvckVhY2gocmVzdGF1cmFudCA9PiB7XHJcbiAgICB1bC5hcHBlbmQoY3JlYXRlUmVzdGF1cmFudEhUTUwocmVzdGF1cmFudCkpO1xyXG4gIH0pO1xyXG4gIGFkZE1hcmtlcnNUb01hcCgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwuXHJcbiAqL1xyXG5jb25zdCBjcmVhdGVSZXN0YXVyYW50SFRNTCA9IHJlc3RhdXJhbnQgPT4ge1xyXG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICBpbWFnZS5jbGFzc05hbWUgPSBcInJlc3RhdXJhbnQtaW1nXCI7XHJcbiAgaW1hZ2UuY2xhc3NMaXN0LmFkZChcImxvemFkXCIpO1xyXG4gIGltYWdlLnNyYyA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuICBpbWFnZS5zcmNzZXQgPSBEQkhlbHBlci5pbWFnZVNyY3NldEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XHJcbiAgaW1hZ2Uuc2l6ZXMgPSBEQkhlbHBlci5pbWFnZVNpemVzRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuICBpbWFnZS5hbHQgPSBgJHtyZXN0YXVyYW50Lm5hbWV9LCBwcm9tb3Rpb25hbCBpbWFnZS5gO1xyXG4gIGxpLmFwcGVuZChpbWFnZSk7XHJcblxyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XHJcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XHJcbiAgbGkuYXBwZW5kKG5hbWUpO1xyXG5cclxuICBjb25zdCBmYXYgPSBmYXZvcml0ZUJ1dHRvbihyZXN0YXVyYW50KTtcclxuICBmYXYuYWx0ID0gYFNhdmUgJHtyZXN0YXVyYW50Lm5hbWV9IGFzIGEgZmF2b3JpdGVgO1xyXG4gIGxpLmFwcGVuZChmYXYpO1xyXG5cclxuICBjb25zdCBuZWlnaGJvcmhvb2QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICBuZWlnaGJvcmhvb2QuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uZWlnaGJvcmhvb2Q7XHJcbiAgbGkuYXBwZW5kKG5laWdoYm9yaG9vZCk7XHJcblxyXG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICBjb25zdCBhZGRyZXNzQXJyYXkgPSByZXN0YXVyYW50LmFkZHJlc3Muc3BsaXQoXCIsXCIpO1xyXG4gIGNvbnN0IGNpdHlTdGF0ZVppcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gIGNvbnN0IG1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICBjb25zdCB1cmwgPSBEQkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG5cclxuICBhZGRyZXNzLmlubmVySFRNTCA9IGFkZHJlc3NBcnJheVswXTtcclxuICBjaXR5U3RhdGVaaXAuaW5uZXJIVE1MID0gYCR7YWRkcmVzc0FycmF5WzFdfSwgJHthZGRyZXNzQXJyYXlbMl19YDtcclxuXHJcbiAgbGkuYXBwZW5kKGFkZHJlc3MpO1xyXG4gIGxpLmFwcGVuZChjaXR5U3RhdGVaaXApO1xyXG5cclxuICBtb3JlLmNsYXNzTmFtZSA9IFwidmlldy1kZXRhaWxzLWJ0blwiO1xyXG4gIG1vcmUuaW5uZXJIVE1MID0gXCJWaWV3IERldGFpbHNcIjtcclxuICBtb3JlLnR5cGUgPSBcIkJ1dHRvblwiO1xyXG4gIG1vcmUuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcImJ1dHRvblwiKTtcclxuICBtb3JlLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgYFZpZXcgbW9yZSBkZXRhaWxzIGFib3V0ICR7cmVzdGF1cmFudC5uYW1lfWApO1xyXG4gIG1vcmUuaHJlZiA9IHVybDtcclxuICBuYW1lLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudCA9PiB7XHJcbiAgICB3aW5kb3cubG9jYXRpb24gPSB1cmw7XHJcbiAgfSk7XHJcblxyXG4gIGxpLnNldEF0dHJpYnV0ZShcclxuICAgIFwiYXJpYS1sYWJlbFwiLFxyXG4gICAgYCR7cmVzdGF1cmFudC5uYW1lfSBpcyBhbiAke3Jlc3RhdXJhbnQuY3Vpc2luZV90eXBlfSByZXN0YXVyYW50IGluICR7XHJcbiAgICAgIHJlc3RhdXJhbnQubmVpZ2hib3Job29kXHJcbiAgICB9YFxyXG4gICk7XHJcbiAgbGkuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCIwXCIpO1xyXG5cclxuICBsaS5hcHBlbmQobW9yZSk7XHJcblxyXG4gIHJldHVybiBsaTtcclxufTtcclxuXHJcbmNvbnN0IGFkZE1hcmtlcnNUb01hcCA9IChyZXN0YXVyYW50cyA9IHNlbGYucmVzdGF1cmFudHMpID0+IHtcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgLy8gQWRkIG1hcmtlciB0byB0aGUgbWFwXHJcbiAgICBjb25zdCBtYXJrZXIgPSBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIG5ld01hcCk7XHJcbiAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsIFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG1hcmtlci51cmw7XHJcbiAgICB9KTtcclxuICAgIG1hcmtlcnMucHVzaChtYXJrZXIpO1xyXG4gIH0pO1xyXG59O1xyXG4iLCJjb25zdCB7IHNlcnZpY2VXb3JrZXIgfSA9IG5hdmlnYXRvcjtcclxuXHJcbmNvbnN0IHJlZ2lzdGVyU2VydmljZVdvcmtlciA9ICgpID0+IHtcclxuICBpZiAoXCJzZXJ2aWNlV29ya2VyXCIgaW4gbmF2aWdhdG9yKSB7XHJcbiAgICBzZXJ2aWNlV29ya2VyXHJcbiAgICAgIC5yZWdpc3RlcihcIi4vc3cuanNcIiwgeyBzY29wZTogXCIuL1wiIH0pXHJcbiAgICAgIC50aGVuKHJlZ2lzdHJhdGlvbiA9PiB7XHJcbiAgICAgICAgY29uc29sZS5pbmZvKFwiU2VydmljZSB3b3JrZXIgcmVnaXN0ZXJlZFwiLCByZWdpc3RyYXRpb24uc2NvcGUpO1xyXG4gICAgICAgIGNvbnN0IHN3ID0ge307XHJcblxyXG4gICAgICAgIGlmIChyZWdpc3RyYXRpb24uaW5zdGFsbGluZykge1xyXG4gICAgICAgICAgc3cuc3RhdHVzID0gcmVnaXN0cmF0aW9uLmluc3RhbGxpbmc7XHJcbiAgICAgICAgICBjb25zb2xlLmluZm8oXCJTZXJ2aWNlIHdvcmtlciBpbnN0YWxsaW5nXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJlZ2lzdHJhdGlvbi53YWl0aW5nKSB7XHJcbiAgICAgICAgICBzdy5zdGF0dXMgPSByZWdpc3RyYXRpb24ud2FpdGluZztcclxuICAgICAgICAgIGNvbnNvbGUud2FybihcIlNlcnZpY2Ugd29ya2VyIHdhaXRpbmdcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVnaXN0cmF0aW9uLmFjdGl2ZSkge1xyXG4gICAgICAgICAgc3cuc3RhdHVzID0gcmVnaXN0cmF0aW9uLmFjdGl2ZTtcclxuICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIlNlcnZpY2Ugd29ya2VyIGFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICgnc3luYycgaW4gIHJlZ2lzdHJhdGlvbikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmluZm8oXCJTeW5jIGFjdGl2ZVwiKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN3LnN0YXR1cykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJTZXJ2aWNlIHdvcmtlciBzdGF0ZTpcIiwgc3cuc3RhdHVzLnN0YXRlKTtcclxuICAgICAgICAgIHN3LnN0YXR1cy5hZGRFdmVudExpc3RlbmVyKFwic3RhdGVjaGFuZ2VcIiwgZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2VydmljZSB3b3JrZXIgc3RhdGU6XCIsIGUudGFyZ2V0LnN0YXRlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlNlcnZpY2Ugd29ya2VyIGluc3RhbGxhdGlvbiBmYWlsZWRcIiwgZXJyKTtcclxuICAgICAgICAvLyBsb2FkUGFnZSgpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIElmIHlvdSBlbmQgdXAgaGVyZSBzZXJ2aWNld29ya2VyIGlzIG5vdCBzdXBwb3J0ZWRcclxuICAvL2xvYWRQYWdlKCk7XHJcbn07XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBldmVudCA9PiB7XHJcbiAgcmVnaXN0ZXJTZXJ2aWNlV29ya2VyKCk7XHJcbn0pO1xyXG4iXX0="}